const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BLU6EWbn.js","./DNzAVRFX.js","./entry.hZzTrknk.css"])))=>i.map(i=>d[i]);
var $=Object.defineProperty;var I=(e,t,a)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var y=(e,t,a)=>I(e,typeof t!="symbol"?t+"":t,a);import{D as V,_ as T,a as M}from"./DNzAVRFX.js";import{D as L}from"./BKKJGcg5.js";import{_ as A}from"./FhlW11ky.js";import{_ as D,r as c,C as w,ae as R,M as f,o as h,c as _,A as o,n as v,g,a as i,b as P,w as u,m as k,x as b,k as j,p as N}from"./BLU6EWbn.js";import{u as O}from"./BHwxq8Vd.js";import{u as z}from"./D5enFtAI.js";const C=new V,E=()=>({key:"vimeo",src:"https://player.vimeo.com/api/player.js",async:!0,defer:!0,onload:()=>{C.resolve(window.Vimeo)}}),S=()=>C.promise;class q{constructor(){y(this,"api");y(this,"players",[])}play(t){return this.pausePlayers(t),t.play()}pausePlayers(t){return Promise.all(this.players.filter(a=>!t||t&&a!==t).map(async a=>{!await a.getPaused()&&a.pause()}))}async createPlayer(...t){this.api=await S();const a=new this.api.Player(...t);return a.on("playing",()=>this.pausePlayers(a)),this.add(a),a}add(t){this.players.push(t)}remove(t){this.players=this.players.filter(a=>a!==t),t.destroy()}}const B={autoplay:{type:Boolean,default:!1},mute:{type:Boolean,default:void 0},url:{type:String,required:!0},title:{type:String,required:!1,default:null},options:{type:Object,default(){return{}}},posterSources:{type:Array,default(){return[{src:void 0,media:"all",sizes:{default:"100vw"}}]}}};var Q={};const m=new q,F={components:{BoosterPicture:A,DefaultButton:L},props:B,emits:["playing","ready"],async setup(e){z();const t=c([]);Q.prerender||O({script:w(()=>t.value)});const{withQuery:a}=await T(async()=>{const{withQuery:s}=await import("./BLU6EWbn.js").then(d=>d.ai);return{withQuery:s}},__vite__mapDeps([0,1,2]),import.meta.url),l=c(null),r=c(!1),n=c(null),p=w(()=>{var s;return((s=l.value)==null?void 0:s.html.replace(/.*src="([^"]*)".*/,"$1").replace(/&amp;/g,"&"))||`https://player.vimeo.com/video/${e.videoId}`});try{const s=a("https://vimeo.com/api/oembed.json",{url:e.url,width:1920,height:1080,...e.playerOptions}),d=await fetch(s);l.value=await d.json()}catch(s){console.error(s),r.value=!0,n.value=p.value}return{playerSrc:p,videoId:new URL(e.url).pathname.replace("/",""),iframeMode:r,src:n,script:t,videoData:l}},data(){return{inert:!1,player:null,ready:!1,loading:!1,playing:!1,isTouchDevice:M()}},computed:{playerTitle(){return this.title||this.videoData&&this.videoData.title},playerOptions(){return{dnt:!0,autopause:!1,...this.options,playsinline:!0,autoplay:this.autoplay,muted:this.isTouchDevice||this.mute}},pictureDataset(){return{formats:this.$booster.targetFormats,title:this.title,sources:this.posterSources.map(e=>{var t,a;return{...e,src:e.src||((a=(t=this.videoData)==null?void 0:t.thumbnail_url)==null?void 0:a.replace("https://i.vimeocdn.com","vimeo"))}})}}},watch:{videoData(e){e&&this.autoplay&&this.onInit()},ready(){this.inert=!1}},mounted(){this.inert=!0},unmounted(){this.player&&m.remove(this.player)},methods:{onInit(){this.loading=!0,this.src=this.playerSrc,this.script=[E()],this.iframeMode&&(this.$refs.player.src=String(this.$refs.player.src))},onPlayerStateChange(e){e.playing?this.playing=!0:(e.ended||e.pause)&&(this.playing=!1),this.$emit("playing",this.playing)},async onLoad(e){!e.target.src||!this.script.length||(await S(),this.player=R(await m.createPlayer(this.$refs.player)),this.player.on("playing",()=>this.onPlayerStateChange({playing:!0})),this.player.on("pause",()=>this.onPlayerStateChange({pause:!0})),this.player.on("ended",()=>this.onPlayerStateChange({ended:!0})),await this.player.ready(),m.play(this.player),this.loading=!1,this.ready=!0,this.$emit("ready",{iframe:this.player.element,player:this.player}))}}},H={class:"player"},U=["inert","title","src"];function Y(e,t,a,l,r,n){const p=f("booster-picture"),s=f("default-button");return h(),_("div",{class:j({ready:r.ready,playing:r.playing,"iframe-mode":l.iframeMode})},[o(e.$slots,"background",v(g({playing:r.playing,videoData:l.videoData})),void 0,!0),i("div",H,[o(e.$slots,"beforePlayer",{},void 0,!0),(h(),_("iframe",{ref:"player",key:l.src,inert:r.inert,title:n.playerTitle,src:l.src,allow:"autoplay; fullscreen; picture-in-picture",onLoad:t[0]||(t[0]=(...d)=>n.onLoad&&n.onLoad(...d))},null,40,U)),P(s,{"aria-label":"Play Video",onClick:n.onInit},{default:u(()=>[P(p,k({class:"poster"},n.pictureDataset,{title:n.playerTitle}),null,16,["title"]),r.loading?o(e.$slots,"loading-spinner",{key:0},void 0,!0):b("",!0),!r.ready&&!r.loading?o(e.$slots,"play",{key:1},void 0,!0):b("",!0)]),_:3},8,["onClick"]),o(e.$slots,"afterPlayer",{},void 0,!0)]),o(e.$slots,"default",v(g({playing:r.playing,videoData:l.videoData})),void 0,!0)],2)}const x=D(F,[["render",Y],["__scopeId","data-v-ccd9c9b3"]]),G={components:{BaseVimeo:x},props:B};function J(e,t,a,l,r,n){const p=f("base-vimeo");return h(),N(p,k({class:"nuxt-booster-vimeo"},e.$props),{beforePlayer:u(()=>[o(e.$slots,"beforePlayer",{},void 0,!0)]),"loading-spinner":u(()=>[o(e.$slots,"loading-spinner",{},()=>[t[0]||(t[0]=i("div",{class:"loading-spinner"},[i("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff"},[i("g",{fill:"none","fill-rule":"evenodd"},[i("g",{transform:"translate(1 1)","stroke-width":"2"},[i("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),i("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[i("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])])],-1))],!0)]),play:u(()=>[o(e.$slots,"play",{},()=>[t[1]||(t[1]=i("div",{class:"play"},[i("span",null,[i("svg",{viewBox:"0 0 20 20",preserveAspectRatio:"xMidYMid",focusable:"false"},[i("polygon",{class:"fill",points:"1,0 20,10 1,20"})])])],-1))],!0)]),default:u(s=>[o(e.$slots,"default",v(g(s)),void 0,!0)]),afterPlayer:u(()=>[o(e.$slots,"afterPlayer",{},void 0,!0)]),_:3},16)}const re=D(G,[["render",J],["__scopeId","data-v-1b6996a3"]]);export{re as D};
