import{a6 as g,r as f,a7 as m,C as d,a8 as y,s as S,J as h,a9 as C,N as v,aa as x}from"./CMqSHhD8.js";import{g as c,t as F}from"./vrALC6nu.js";const l=Symbol("criticalContext");function N({critical:i}={}){const t=g(),o=f("critical"in t?t.critical===""||String(t.critical)==="true":i),e=m(l,o.value||!1),r=d(()=>typeof o.value=="boolean"?o.value:e);return y(l,r.value||i),{isCritical:r,critical:e}}function D(){const{booster:i}=S().public;return i}class b{constructor(){this.list=[]}getKey(){return u(JSON.stringify(this.list.map(t=>t.getKey())))}add(t){const o={name:"data-font",value:`${u(JSON.stringify(t.map(e=>e.getKey())))}`};return this.list=[...this.list,...t.map(e=>(e.setRootSelector(o),e))],o}getPreloadDescriptions(t,o="anonymous"){return Array.from(this.list.reduce((e,r)=>e,new Map).values())}getStyleDescriptions(t){return p([c(this.list.map(o=>o.getCSSText(t)).join(" "),!1,this.getKey())])}getNoScriptStyleDescriptions(){return p([c(this.list.map(t=>t.getNoScriptCSSText()).join(" "),!0,this.getKey())])}get size(){return this.list.length}toJSON(){return{list:this.list.map(t=>t.toJSON())}}}function u(i,t){return F(`${i}_${t}`).padStart(9,"-")}function p(i){return i.filter(t=>t.key!=="0")}function j(i){const{isCritical:t,critical:o}=N(i),e=D(),r=h(),n=C(new b),a={usedFontaine:e.usedFontaine};try{const s=r.$booster.head.push(n,t.value,a);v(()=>x(()=>s.dispose()))}catch(s){console.error(s)}return{isCritical:t,critical:o,$getFont:(...s)=>({runtimeConfig:e,isCritical:t.value,fontCollection:n,definition:r.$booster.getFont(...s)})}}export{j as a,N as u};
