import{g as c,t as g}from"./BRWpFFLA.js";import{a5 as f,r as m,a3 as d,C as y,a4 as S,s as h,H as C,a6 as v,K as x,a7 as F}from"./z5fpUeFY.js";const l=Symbol("criticalContext");function D({critical:i}={}){const t=f(),o=m("critical"in t?t.critical===""||String(t.critical)==="true":i),e=d(l,o.value||!1),r=y(()=>typeof o.value=="boolean"?o.value:e);return S(l,r.value||i),{isCritical:r,critical:e}}class K{constructor(){this.list=[]}getKey(){return u(JSON.stringify(this.list.map(t=>t.getKey())))}add(t){const o={name:"data-font",value:`${u(JSON.stringify(t.map(e=>e.getKey())))}`};return this.list=[...this.list,...t.map(e=>(e.setRootSelector(o),e))],o}getPreloadDescriptions(t,o="anonymous"){return Array.from(this.list.reduce((e,r)=>e,new Map).values())}getStyleDescriptions(t){return p([c(this.list.map(o=>o.getCSSText(t)).join(" "),!1,this.getKey())])}getNoScriptStyleDescriptions(){return p([c(this.list.map(t=>t.getNoScriptCSSText()).join(" "),!0,this.getKey())])}get size(){return this.list.length}toJSON(){return{list:this.list.map(t=>t.toJSON())}}}function u(i,t){return g(`${i}_${t}`).padStart(9,"-")}function p(i){return i.filter(t=>t.key!=="0")}function N(){const{booster:i}=h().public;return i}function A(i){const{isCritical:t,critical:o}=D(i),e=N(),r=C(),n=v(new K),a={usedFontaine:e.usedFontaine};try{const s=r.$booster.head.push(n,t.value,a);x(()=>F(()=>s.dispose()))}catch(s){console.error(s)}return{isCritical:t,critical:o,$getFont:(...s)=>({runtimeConfig:e,isCritical:t.value,fontCollection:n,definition:r.$booster.getFont(...s)})}}export{A as a,D as u};
