var q=Object.defineProperty;var b=(i,s,e)=>s in i?q(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e;var F=(i,s,e)=>b(i,typeof s!="symbol"?s+"":s,e);import{S as P,n as tt,u as j,c as et,B as st,H as rt}from"./rnkk99Me.js";import{t as it,b as nt}from"./8m09tWJ9.js";import{g as ot}from"./CqTdIwbr.js";import{H as E,r as _,o as A,c as N,u as k,_ as ct,C as at,af as lt,F as ut,q as mt,p as ft,b as dt,k as I,E as w}from"./BdbIzQsM.js";import{u as R}from"./D4z3Kskq.js";import{u as Q}from"./DEYbDlon.js";const V=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,ht=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,U=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,pt=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,y=M(V,U,ht),S=M(U,V,pt),Y=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,gt=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,D=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,yt=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,v=M(Y,D,gt),$=M(D,Y,yt),p=/<(?!=)/,g=/>(?!=)/,L=/print/i,O=/^print$/i,h=Number.MAX_VALUE;function B(i){let s=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(i);if(s===null&&(y(i)||v(i))&&(s=/(\d)/.exec(i)),s==="0")return 0;if(s===null)return h;let e=s[1];switch(s[2]){case"ch":e=parseFloat(e)*8.8984375;break;case"em":case"rem":e=parseFloat(e)*16;break;case"ex":e=parseFloat(e)*8.296875;break;case"px":e=parseFloat(e);break}return+e}function M(i,s,e){return function(n){let t;return i.test(n)?t=!0:s.test(n)?t=!1:t=e.test(n),n.includes("not")?!t:t}}function T(i,s){const e=L.test(i),n=O.test(i),t=L.test(s),r=O.test(s);return e&&t?!n&&r?1:n&&!r?-1:i.localeCompare(s):e?1:t?-1:null}function vt(i){const e={}.unitlessMqAlwaysFirst;function n(t,r){const f=T(t,r);if(f!==null)return f;const d=y(t)||v(t),c=S(t)||$(t),a=y(r)||v(r),u=S(r)||$(r);if(e&&(!d&&!c||!a&&!u))return!d&&!c&&!a&&!u?t.localeCompare(r):!a&&!u?1:-1;{if(d&&u)return-1;if(c&&a)return 1;const o=B(t),m=B(r);if(o===h&&m===h)return t.localeCompare(r);if(o===h)return 1;if(m===h)return-1;if(o>m)return c?-1:1;if(o<m)return c?1:-1;if(o===m){if(c&&u){if(p.test(t)&&!p.test(r))return 1;if(!p.test(t)&&p.test(r))return-1}if(d&&a){if(g.test(t)&&!g.test(r))return 1;if(!g.test(t)&&g.test(r))return-1}}return t.localeCompare(r)}}return n.desktopFirst=function(t,r){const f=T(t,r);if(f!==null)return f;const d=y(t)||v(t),c=S(t)||$(t),a=y(r)||v(r),u=S(r)||$(r);if(e&&(!d&&!c||!a&&!u))return!d&&!c&&!a&&!u?t.localeCompare(r):!a&&!u?1:-1;{if(d&&u)return 1;if(c&&a)return-1;const o=B(t),m=B(r);if(o===h&&m===h)return t.localeCompare(r);if(o===h)return 1;if(m===h)return-1;if(o>m)return c?-1:1;if(o<m)return c?1:-1;if(o===m){if(c&&u){if(p.test(t)&&!p.test(r))return 1;if(!p.test(t)&&p.test(r))return-1}if(d&&a){if(g.test(t)&&!g.test(r))return 1;if(!g.test(t)&&g.test(r))return-1}}return-t.localeCompare(r)}},n}const _t=vt();class C{constructor(s,e={}){F(this,"list",[]);F(this,"sort",!1);e=e||{},this.sort=e.sort||!1,this.list=this.list.concat(Array.from(s||this.list).map(n=>new P(n)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(s=>s.key).join("-")}get sorted(){return this.sort?this.list.sort((s,e)=>_t(s.media,e.media)):this.list}get style(){return this.list.map(({media:s,width:e,height:n,style:t})=>`
      @media ${s} { .${this.className}::before { padding-top: calc((1 / (${e} / ${n})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${s} { .${this.className} { aspect-ratio: ${e} / ${n}; } }
      }
      ${t}
    `).reverse().join(" ")}get className(){return`picture-${it(this.sorted.map(({src:s})=>tt(s)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(s=>s.className)}}getFormats(s,e,n){return this.sorted.reduce((t,r)=>t.concat(s.map(f=>r.modify({format:f,preload:f.includes(e)&&n}))),[])}async getMeta(s,e){const n=await Promise.all(this.sorted.map(t=>{const r=s.getSizes(t.src,{sizes:t.sizes,modifiers:t.getModifiers(),...t.getOptions(e)});return t.getMeta(r.src,e)}));return new C(n)}toJSON(){return this.list}static create(...s){return new this(...s)}}var xt={};const wt=["srcset","sizes","media","type"],St={__name:"Source",props:{source:{type:P,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:i=>["anonymous","use-credentials","",!0,!1].includes(i)}},setup(i){const s=new Map([["jpg","jpeg"]]),e=i,n=j(),t=E().$booster,r=n.getSizes(e.source.src,{sizes:e.source.sizes,modifiers:e.source.getModifiers(),...e.source.getOptions(t)}),f=_(r.srcset||r.src),d=_(`image/${s.get(e.source.format)||e.source.format}`),c=_(ot(e.crossorigin||t.crossorigin)),a=new P(e.source);return R({link:[r&&a.preload&&xt.prerender&&a.getPreload(f,r.sizes,c)].filter(Boolean)}),(u,o)=>(A(),N("source",{srcset:f.value,sizes:k(r).sizes,media:i.source.media,type:d.value},null,8,wt))}},G={sources:{type:[Array,C],required:!0},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:et},sortSources:{type:Boolean,default:!0}},$t={__name:"Base",props:G,emits:["load"],async setup(i,{emit:s}){let e,n;const t=["avif","webp","png","jpg","gif"],r=i,f=s,{isCritical:d}=Q(),c=j(),a=E().$booster,u=C.create(r.sources,{sort:r.sortSources}),o=_(null),m=r.formats||a.targetFormats,J=Array.from(new Set(t.map(l=>m.find(x=>x.includes(l))))).filter(Boolean),X=t.find(l=>m.find(x=>x.includes(l))),K=_(u.getFormats(J,X,d)),z=at(()=>{var l;return((l=o.value)==null?void 0:l.classNames)||{}}),Z=l=>{f("load",l)};R(()=>{if(o.value&&o.value.length){const l=o.value.classNames;return{style:[nt(o.value,l)]}}return{}});try{o.value=([e,n]=lt(()=>u.getMeta(c,a)),e=await e,n(),e)}catch(l){console.error(l)}return(l,x)=>(A(),N("picture",{class:I([z.value.picture,"nuxt-booster-picture"])},[(A(!0),N(ut,null,mt(K.value,H=>(A(),ft(k(St),{key:H.key,source:H,crossorigin:l.crossorigin},null,8,["source","crossorigin"]))),128)),dt(k(st),{class:I(z.value.image),title:l.title,alt:l.alt,crossorigin:l.crossorigin,width:"0",height:"0",onLoad:Z},null,8,["class","title","alt","crossorigin"])],2))}},W=ct($t,[["__scopeId","data-v-fc7d4048"]]),kt={props:{hydrate:{type:Boolean,default:!0},...G},setup(){const{isCritical:i}=Q();return{isCritical:i}},render(){return this.hydrate?w(W,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.isCritical}):w(rt,{},[w("noscript",{class:"nuxt-booster-picture-noscript"},[w(W,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.hydrate})])])}};export{kt as _};
