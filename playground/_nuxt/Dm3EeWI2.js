import{e as A,Z as F,Q as z,$ as H,a0 as T,a1 as b,a2 as G,R as k,a3 as I,a4 as K,G as U,i as V,a5 as Z,j as w,B as y,a6 as N,u as Y,a7 as Q,c as X,o as ee,m as te,h as ie,_ as se}from"./DtWUsCEZ.js";import{t as R,g as re}from"./CkJfcuOb.js";import{g as oe}from"./B1b7UqBk.js";import{a as ne}from"./B9EbSfFp.js";const Ue=A({name:"HydrationWrapper",setup(t,{slots:e}){const i=e.default?e.default():[];return()=>ae(i)}}),ae=t=>t.length===1?t[0]:t;function ce(t){return new URL(globalThis.location.href)}const O=["avif","webp","png","jpg","gif"],de="jpg",ue=t=>{const{pathname:e}=H(t),s=(T(e,{strict:!1})||"").match(/\.([^.]+)$/),r=s?s[1]:"";return r&&O.includes(r)||O.includes(r)?r:de};async function le(t,e,i){window.Image?t=t.modify({src:e}):t=t.modify({src:z(e)?e:F(e,ce().origin)});const{width:s,height:r}=await i.getImageSize(t.src);return t.modify({width:s,height:r})}class _{src;media;sizes;width;height;format;quality;preload;modifiers;provider;preset;densities;constructor({src:e,sizes:i,width:s,height:r,media:o="all",quality:a=70,format:n=void 0,preload:u=!1,modifiers:g={},provider:l=void 0,preset:d=void 0,densities:c=void 0}){this.src=e,this.sizes=i,this.media=o,this.width=s,this.height=r,this.format=he(e,n),this.quality=a,this.preload=u||!1,this.modifiers=g,this.provider=l,this.preset=d,this.densities=c}get key(){return R(JSON.stringify(this.toJSON()))}get ratio(){return(this.width??0)/(this.height??0)}get className(){return`image-${R(fe(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{imageOptions:{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}}getMeta(e,i){return le(new _({...this.toJSON()}),e,i)}getPreload(e,i,s){return{rel:"preload",as:"image",imagesrcset:e,imagesizes:i,media:this.media,crossorigin:s,fetchpriority:"high"}}modify(e){return new _({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function he(t,e){const i=ue(t);return e?.includes(i)?i:e||i}function fe(t){if(t.startsWith("/"))return t;const e=new URL(t);return e.pathname+e.search+e.hash}function me(t){return["anonymous","use-credentials",void 0].includes(t)}const ge={source:{type:[_,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){},validator:me}};async function pe(t,e){return await ve(e).catch(s=>(console.error("Failed to get image meta for "+e,s+""),{width:0,height:0,ratio:0}))}async function ve(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,i)=>{const s=new Image;s.onload=()=>{const r={width:s.width,height:s.height,ratio:s.width/s.height};e(r)},s.onerror=r=>i(r),s.src=t})}function j(t){return(e=>e!==void 0?t[e]||e:t.missingValue)}function we(t={}){const e=t.formatter,i=t.keyMap&&typeof t.keyMap!="function"?j(t.keyMap):t.keyMap,s={};for(const r in t.valueMap){const o=r,a=t.valueMap[o];s[o]=typeof a=="object"?j(a):a}return r=>{const o=[];for(const a in r){const n=a;if(typeof r[n]>"u")continue;const u=typeof s[n]=="function"?s[n](r[n]):r[n];o.push([i?i(n):n,u])}return e?o.map(a=>e(...a)).join(t.joinWith??"&"):new URLSearchParams(o).toString()}}function ye(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const i of t.split(" ")){const s=Number.parseInt(i.replace("x",""));s&&e.add(s)}return Array.from(e)}function _e(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function x(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function Se(t){const e={};if(typeof t=="string")for(const i of t.split(/[\s,]+/).filter(s=>s)){const s=i.split(":");s.length!==2?e["1px"]=s[0].trim():e[s[0].trim()]=s[1].trim()}else Object.assign(e,t);return e}function Me(t){const e={options:t},i=(r,o={})=>q(e,r,o),s=((r,o,a)=>i(r,b({modifiers:o},a)).url);for(const r in t.presets)s[r]=((o,a,n)=>s(o,a,{...t.presets[r],...n}));return s.options=t,s.getImage=i,s.getMeta=((r,o)=>$e(e,r,o)),s.getSizes=((r,o)=>ze(e,r,o)),e.$img=s,s}async function $e(t,e,i){const s=q(t,e,{...i});return typeof s.getMeta=="function"?await s.getMeta():await pe(t,s.url)}function q(t,e,i){if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{setup:s,defaults:r}=xe(t,i.provider||t.options.provider),o=s(),a=C(t,i.preset);if(e=z(e)?e:G(e),!o.supportsAlias){for(const l in t.options.alias)if(e.startsWith(l)){const d=t.options.alias[l];d&&(e=k(d,e.slice(l.length)))}}if(o.validateDomains&&z(e)){const l=H(e).host;if(!t.options.domains.find(d=>d===l))return{url:e}}const n=b(i,a,r),u={...n,modifiers:{...n.modifiers,width:n.modifiers?.width?x(n.modifiers.width):void 0,height:n.modifiers?.height?x(n.modifiers.height):void 0}},g=o.getImage(e,u,t);return g.format||=u.modifiers.format||"",g}function xe(t,e){const i=t.options.providers[e];if(!i)throw new Error("Unknown provider: "+e);return i}function C(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function ze(t,e,i){const s=C(t,i.preset),r=b(i,s),o=x(r.modifiers?.width),a=x(r.modifiers?.height),n=r.sizes?Se(r.sizes):{},u=r.densities?.trim(),g=u?ye(u):t.options.densities;_e(g);const l=o&&a?a/o:0,d=[],c=[];if(Object.keys(n).length>=1){for(const h in n){const m=L(h,String(n[h]),a,l,t);if(m!==void 0){d.push({size:m.size,screenMaxWidth:m.screenMaxWidth,media:`(max-width: ${m.screenMaxWidth}px)`});for(const v of g)c.push({width:m._cWidth*v,src:B(t,e,i,m,v)})}}ke(d)}else for(const h of g){const m=Object.keys(n)[0];let v=m?L(m,String(n[m]),a,l,t):void 0;v===void 0&&(v={size:"",screenMaxWidth:0,_cWidth:i.modifiers?.width,_cHeight:i.modifiers?.height}),c.push({width:h,src:B(t,e,i,v,h)})}be(c);const f=c[c.length-1],S=d.length?d.map(h=>`${h.media?h.media+" ":""}${h.size}`).join(", "):void 0,M=S?"w":"x",$=c.map(h=>`${h.src} ${h.width}${M}`).join(", ");return{sizes:S,srcset:$,src:f?.src}}function L(t,e,i,s,r){const o=r.options.screens&&r.options.screens[t]||Number.parseInt(t),a=e.endsWith("vw");if(!a&&/^\d+$/.test(e)&&(e=e+"px"),!a&&!e.endsWith("px"))return;let n=Number.parseInt(e);if(!o||!n)return;a&&(n=Math.round(n/100*o));const u=s?Math.round(n*s):i;return{size:e,screenMaxWidth:o,_cWidth:n,_cHeight:u}}function B(t,e,i,s,r){return t.$img(e,{...i.modifiers,width:s._cWidth?s._cWidth*r:void 0,height:s._cHeight?s._cHeight*r:void 0},i)}function ke(t){t.sort((i,s)=>i.screenMaxWidth-s.screenMaxWidth);let e=null;for(let i=t.length-1;i>=0;i--){const s=t[i];s.media===e&&t.splice(i,1),e=s.media}for(let i=0;i<t.length;i++)t[i].media=t[i+1]?.media||""}function be(t){t.sort((i,s)=>i.width-s.width);let e=null;for(let i=t.length-1;i>=0;i--){const s=t[i];s.width===e&&t.splice(i,1),e=s.width}}function We(t){let e;return()=>e||(e=typeof t=="function"?t():t,e)}const Ie=we({keyMap:{format:"f",width:"w",height:"h",resize:"s",quality:"q",background:"b",position:"pos"},formatter:(t,e)=>I(t)+"_"+I(e.toString())}),Ne=We({validateDomains:!0,supportsAlias:!0,getImage(t,{modifiers:e,baseURL:i},s){e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const r=Ie(e)||"_";return i||(i=k(s.options.nuxt.baseURL,"/_ipx")),{url:k(i,r,K(t).replace(/\/{2,}/g,"/"))}}}),Re={screens:{sm:768,md:996,lg:1200,xl:1367,"2xl":1536,default:320,xxs:480,xs:576,xxl:1600,"4k":1921},presets:{},provider:"ipxStatic",domains:["picsum.photos","img.youtube.com","i.vimeocdn.com","i.pickadummy.com"],alias:{"/picsum":"https://picsum.photos","/youtube":"https://img.youtube.com","/vimeo":"https://i.vimeocdn.com","/pickadummy":"https://i.pickadummy.com"},densities:[1,2],format:["webp"],provider:"ipxStatic",providers:{ipxStatic:{setup:Ne,defaults:{}}}},Oe=t=>{const e=V(),i=U();return i.$img||i._img||(i._img=Me({...Re,event:i.ssrContext?.event,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};var P={};const je=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],Le=A({inheritAttrs:!1,__name:"Base",props:ge,emits:["load"],async setup(t,{emit:e}){let i,s;const r=Z(),o=t,a=e,n=Oe(),u=U().$booster,{isCritical:g}=ne(),l=w(!0),d=w(),c=w(),f=w(),S=w(),M=w(),$=y(()=>oe(o.crossorigin||u.crossorigin)),h=y(()=>{const p={loading:l.value};return f.value?.className&&(p[f.value.className]=!0),p}),m=y(()=>r.width||d.value?.width),v=y(()=>r.height||d.value?.height),E=y(()=>g.value?"eager":"lazy"),J=y(()=>!o.source||new _(o.source).format!=="svg"?"async":"sync");function D(p){l.value=!1,a("load",p.target)}if(o.source){f.value=N(new _(o.source)),c.value=n.getSizes(f.value.src,{sizes:f.value.sizes,modifiers:f.value.getModifiers(),...f.value.getOptions(u)}),S.value=c.value.srcset||c.value.src,M.value=c.value.sizes;const p=w({});if(Y(()=>p.value),c.value&&c.value.src){try{d.value=N(([i,s]=Q(()=>f.value.getMeta(c.value.src,u)),i=await i,s(),i))}catch(W){console.error(W)}p.value={style:[d.value&&re(f.value)].filter(Boolean),link:[!(!c.value||!g.value)&&P.prerender&&f.value.getPreload(c.value.srcset,c.value.sizes,$.value)].filter(Boolean),noscript:[P.prerender&&{key:"img-nojs",children:"<style>img { content-visibility: unset !important; }</style>"}].filter(Boolean)}}}else l.value=!1;return(p,W)=>(ee(),X("img",te(ie(r),{srcset:S.value,sizes:M.value,width:m.value,height:v.value,class:["nuxt-booster-image",h.value],title:p.title,alt:p.alt||p.title,loading:E.value,decoding:J.value,crossorigin:$.value,onLoad:D}),null,16,je))}}),qe=se(Le,[["__scopeId","data-v-c960924f"]]);export{qe as B,Ue as H,_ as S,me as c,ge as i,fe as n,Oe as u};
