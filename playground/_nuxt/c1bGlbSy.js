const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DPeWXi4a.js","./zp2gyJps.js","./entry.5pszGEje.css"])))=>i.map(i=>d[i]);
var I=Object.defineProperty;var V=(e,t,a)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var h=(e,t,a)=>V(e,typeof t!="symbol"?t+"":t,a);import{D as $,_ as j,a as T}from"./zp2gyJps.js";import{u as O}from"./CEpdOaR6.js";import{D as x}from"./CalUMDrh.js";import{_ as g}from"./Ci_1pPZc.js";import{_ as P,r as d,C as w,ab as L,O as M,o as c,c as _,A as o,n as f,g as v,a as r,b as z,w as p,l as b,aj as A,m as S,x as D,i as N,u as R,p as E,e as q}from"./DPeWXi4a.js";const k=new $,Q=()=>({key:"vimeo",src:"https://player.vimeo.com/api/player.js",async:!0,defer:!0,onload:()=>{k.resolve(window.Vimeo)}}),C=()=>k.promise;class F{constructor(){h(this,"api");h(this,"players",[])}play(t){return this.pausePlayers(t),t.play()}pausePlayers(t){return Promise.all(this.players.filter(a=>!t||t&&a!==t).map(async a=>{!await a.getPaused()&&a.pause()}))}async createPlayer(...t){this.api=await C();const a=new this.api.Player(...t);return a.on("playing",()=>this.pausePlayers(a)),this.add(a),a}add(t){this.players.push(t)}remove(t){this.players=this.players.filter(a=>a!==t),t.destroy()}}var H={};const m=new F,U={components:{BoosterPicture:g,DefaultButton:x},props:{autoplay:{type:Boolean,default:!1},mute:{type:Boolean,default:void 0},url:{type:String,required:!0},title:{type:String,required:!1,default:null},options:{type:Object,default(){return{}}},posterSizes:{type:Object,default(){return{default:"100vw",xxs:"100vw",xs:"100vw",sm:"100vw",md:"100vw",lg:"100vw",xl:"100vw",xxl:"100vw"}}},posterDensities:{type:[String,Number],default:void 0}},emits:["playing","ready"],async setup(e){const t=d([]);H.prerender||O({script:w(()=>t.value)});const{withQuery:a}=await j(async()=>{const{withQuery:l}=await import("./DPeWXi4a.js").then(y=>y.ak);return{withQuery:l}},__vite__mapDeps([0,1,2]),import.meta.url),s=d(null),i=d(!1),n=d(null),u=w(()=>{var l;return((l=s.value)==null?void 0:l.html.replace(/.*src="([^"]*)".*/,"$1").replace(/&amp;/g,"&"))||`https://player.vimeo.com/video/${e.videoId}`});try{const l=a("https://vimeo.com/api/oembed.json",{url:e.url,width:1920,height:1080,...e.playerOptions}),y=await fetch(l);s.value=await y.json()}catch(l){console.error(l),i.value=!0,n.value=u.value}return{playerSrc:u,videoId:new URL(e.url).pathname.replace("/",""),iframeMode:i,src:n,script:t,videoData:s}},data(){return{inert:!1,player:null,ready:!1,loading:!1,playing:!1,isTouchDevice:T()}},computed:{playerTitle(){return this.title||this.videoData&&this.videoData.title},playerOptions(){return{dnt:!0,autopause:!1,...this.options,playsinline:!0,autoplay:this.autoplay,muted:this.isTouchDevice||this.mute}},pictureComponent(){return this.videoData?g:"picture"},poster(){var e;return this.videoData?{formats:this.$booster.targetFormats,title:this.playerTitle,sources:[{format:"jpg",src:this.videoData&&((e=this.videoData.thumbnail_url)==null?void 0:e.replace("https://i.vimeocdn.com","vimeo")),sizes:this.posterSizes,media:"all",densities:this.posterDensities}]}:null}},watch:{videoData(e){e&&this.autoplay&&this.onInit()},ready(){this.inert=!1}},mounted(){this.inert=!0},unmounted(){this.player&&m.remove(this.player)},methods:{onInit(){this.loading=!0,this.src=this.playerSrc,this.script=[Q()],this.iframeMode&&(this.$refs.player.src=String(this.$refs.player.src))},onPlayerStateChange(e){e.playing?this.playing=!0:(e.ended||e.pause)&&(this.playing=!1),this.$emit("playing",this.playing)},async onLoad(e){!e.target.src||!this.script.length||(await C(),this.player=L(await m.createPlayer(this.$refs.player)),this.player.on("playing",()=>this.onPlayerStateChange({playing:!0})),this.player.on("pause",()=>this.onPlayerStateChange({pause:!0})),this.player.on("ended",()=>this.onPlayerStateChange({ended:!0})),await this.player.ready(),m.play(this.player),this.loading=!1,this.ready=!0,this.$emit("ready",{iframe:this.player.element,player:this.player}))}}},Y={class:"player"},G=["inert","title","src"];function J(e,t,a,s,i,n){const u=M("default-button");return c(),_("div",{class:N({ready:i.ready,playing:i.playing,"iframe-mode":s.iframeMode})},[o(e.$slots,"background",f(v({playing:i.playing,videoData:s.videoData})),void 0,!0),r("div",Y,[o(e.$slots,"beforePlayer",{},void 0,!0),(c(),_("iframe",{ref:"player",key:s.src,inert:i.inert,title:n.playerTitle,src:s.src,allow:"autoplay; fullscreen; picture-in-picture",onLoad:t[0]||(t[0]=(...l)=>n.onLoad&&n.onLoad(...l))},null,40,G)),z(u,{"aria-label":"Play Video",onClick:n.onInit},{default:p(()=>[(c(),b(A(n.pictureComponent),S({class:"poster"},n.poster),null,16)),i.loading?o(e.$slots,"loading-spinner",{key:0},void 0,!0):D("",!0),!i.ready&&!i.loading?o(e.$slots,"play",{key:1},void 0,!0):D("",!0)]),_:3},8,["onClick"]),o(e.$slots,"afterPlayer",{},void 0,!0)]),o(e.$slots,"default",f(v({playing:i.playing,videoData:s.videoData})),void 0,!0)],2)}const K=P(U,[["render",J],["__scopeId","data-v-ea901395"]]),B=e=>(E("data-v-3e24882c"),e=e(),q(),e),W=B(()=>r("div",{class:"loading-spinner"},[r("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff"},[r("g",{fill:"none","fill-rule":"evenodd"},[r("g",{transform:"translate(1 1)","stroke-width":"2"},[r("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),r("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[r("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])])],-1)),X=B(()=>r("div",{class:"play"},[r("span",null,[r("svg",{viewBox:"0 0 20 20",preserveAspectRatio:"xMidYMid",focusable:"false"},[r("polygon",{class:"fill",points:"1,0 20,10 1,20"})])])],-1)),Z=Object.assign({inheritAttrs:!1},{__name:"BoosterVimeo",setup(e){return(t,a)=>(c(),b(R(K),S({class:"nuxt-booster-vimeo"},t.$attrs),{beforePlayer:p(()=>[o(t.$slots,"beforePlayer",{},void 0,!0)]),"loading-spinner":p(()=>[o(t.$slots,"loading-spinner",{},()=>[W],!0)]),play:p(()=>[o(t.$slots,"play",{},()=>[X],!0)]),default:p(s=>[o(t.$slots,"default",f(v(s)),void 0,!0)]),afterPlayer:p(()=>[o(t.$slots,"afterPlayer",{},void 0,!0)]),_:3},16))}}),oe=P(Z,[["__scopeId","data-v-3e24882c"]]);export{oe as D};
