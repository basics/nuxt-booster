import{a as l,t as S}from"./CkJfcuOb.js";import{a5 as h,j as C,a8 as m,B as y,a9 as d,i as v,G as x,aa as b,J as N,ab as j}from"./BwRuwBQF.js";const p=Symbol("criticalContext");function K(o={}){const t=h(),{critical:i}={critical:void 0,...o},e=C("critical"in t?t.critical===""||String(t.critical)==="true":i),s=m(p,e.value||!1),n=y(()=>typeof e.value=="boolean"?e.value:s);return d(p,n.value||i),{isCritical:n}}class B{list;constructor(){this.list=[]}getKey(){return g(JSON.stringify(this.list.map(t=>t.getKey())))}add(t){const i={name:"data-font",value:`${g(JSON.stringify(t.map(e=>e.getKey())))}`};return this.list=[...this.list,...t.map(e=>(e.setRootSelector(i),e))],i}getPreloadDescriptions(t,i="anonymous"){return Array.from(this.list.reduce((e,s)=>e,new Map).values())}getStyleDescriptions(t){return f([l(this.list.map(i=>i.getCSSText(t)).join(" "),!1,this.getKey())])}getNoScriptStyleDescriptions(){return f([l(this.list.map(t=>t.getNoScriptCSSText()).join(" "),!0,this.getKey())])}get size(){return this.list.length}toJSON(){return{list:this.list.map(t=>t.toJSON())}}}function g(o){return S(o).padStart(9,"-")}function f(o){return o.filter(t=>t.key!=="0")}function D(){const{booster:o}=v().public;return o}function A(o={}){const{isCritical:t}=K(o),i=D(),e=x(),s=b(new B);try{const r=e.$booster.head.push({fontCollection:s,isCritical:t.value,options:i});N(()=>j(()=>r.dispose()))}catch(r){console.error(r)}function n(r,c,a,u){return typeof r=="object"&&(u=r.options,a=r.style,c=r.weight,r=r.family),{runtimeConfig:i,isCritical:t.value,fontCollection:s,definition:e.$booster.getFont(r,c,a,u)}}return{isCritical:t,$getFont:n}}export{K as a,A as u};
