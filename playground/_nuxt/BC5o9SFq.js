var S=Object.defineProperty;var I=(t,e,a)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var u=(t,e,a)=>I(t,typeof e!="symbol"?e+"":e,a);import{u as C}from"./4GkioB90.js";import{u as k}from"./DT2a43aF.js";import{D as B}from"./BovOQYVz.js";import{D,a as $}from"./CM_-ckP9.js";import{_ as A}from"./CrxBJoNW.js";import{_ as m,r as N,C as L,ac as Y,P as y,o as p,c as f,A as s,x as d,b as h,w as i,m as g,i as j,l as E,u as V,p as R,e as T,a as o}from"./CZyDHtZv.js";const w=new D;typeof window<"u"&&(window.onYouTubeIframeAPIReady=()=>{w.resolve(window.YT)});const x=()=>({key:"youtube",src:"https://www.youtube.com/iframe_api",async:!0,defer:!0}),z=()=>w.promise;class G{constructor(){u(this,"api");u(this,"players",new Map)}play(e){return this.pausePlayers(),e.playVideo()}pausePlayers(e){Array.from(this.players.values()).filter(a=>!e||e&&a!==e).filter(a=>a.getPlayerState).forEach(a=>{a.getPlayerState()===this.api.PlayerState.PLAYING&&a.pauseVideo()})}async createPlayer(...e){this.api=await z();const a=new this.api.Player(...e);return a.addEventListener("onStateChange",({data:c})=>{this.api.PlayerState.PLAYING===c&&this.pausePlayers(a)}),this.add(a),a}add(e){this.players.set(e.id,e)}remove(e){this.players.delete(e.id),e.destroy()}}const l=new G,M={components:{BoosterPicture:A,DefaultButton:B},props:{autoplay:{type:Boolean,default:!1},mute:{type:Boolean,default:void 0},url:{type:String,required:!0},title:{type:String,required:!0},host:{type:String,default:"https://www.youtube-nocookie.com"},options:{type:Object,default(){return{}}},posterSources:{type:Array,default(){return[{src:void 0,media:"all",sizes:{default:"100vw"}}]}}},emits:["ready","playing"],setup(){k();const t=N([]);return C({script:L(()=>t.value)}),{script:t}},data(){return{src:null,videoId:new URL(this.url).searchParams.get("v"),player:null,ready:!1,loading:!1,playing:!1,landscape:!1,isTouchDevice:$()}},computed:{pictureDataset(){return{formats:this.$booster.targetFormats,title:this.title,sources:this.posterSources.map(t=>({...t,src:t.src||`/youtube/vi/${this.videoId}/maxresdefault.jpg`}))}}},mounted(){this.autoplay&&this.onInit()},unmounted(){this.player&&l.remove(this.player)},methods:{reset(){this.src=null,this.ready=!1,this.playing=!1},onInit(){this.loading=!0;const t={rel:0,enablejsapi:1,autoplay:0,modestbranding:1,showinfo:0,iv_load_policy:3,...this.options,playsinline:1,mute:Number(this.isTouchDevice)||Number(this.mute)};this.src=`${this.host}/embed/${this.videoId}?`+Object.entries(t).map(([e,a])=>`${e}=${a}`).join("&"),this.script=[x()]},async onLoad(){this.player=Y(await l.createPlayer(this.$refs.player,{videoId:this.videoId,host:this.host,events:{onReady:t=>{t.target.mute(),l.play(t.target),this.loading=!1,this.ready=!0,this.$emit("ready",{iframe:t.target.getIframe(),player:this.player})},onStateChange:t=>this.onPlayerStateChange(l.api,t.data)}}))},onPlayerStateChange(t,e){e===t.PlayerState.PLAYING?this.playing=!0:(e===t.PlayerState.ENDED||e===t.PlayerState.PAUSED)&&(this.playing=!1),this.$emit("playing",this.playing)}}},O=["title","src"];function q(t,e,a,c,r,n){const _=y("booster-picture"),v=y("default-button");return p(),f("div",{class:j({ready:r.ready,playing:r.playing})},[s(t.$slots,"beforePlayer",{},void 0,!0),r.src?(p(),f("iframe",{key:0,ref:"player",title:a.title,class:"player",src:r.src,allow:"accelerometer; fullscreen; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:e[0]||(e[0]=(...P)=>n.onLoad&&n.onLoad(...P))},null,40,O)):d("",!0),h(v,{onClick:n.onInit},{default:i(()=>[h(_,g({class:"poster"},n.pictureDataset,{title:a.title}),null,16,["title"]),r.loading?s(t.$slots,"loading-spinner",{key:0},void 0,!0):d("",!0),!r.ready&&!r.loading?s(t.$slots,"play",{key:1},void 0,!0):d("",!0)]),_:3},8,["onClick"]),s(t.$slots,"afterPlayer",{},void 0,!0)],2)}const U=m(M,[["render",q],["__scopeId","data-v-7d7574a2"]]),b=t=>(R("data-v-df512f8a"),t=t(),T(),t),F=b(()=>o("svg",{class:"loader loading-spinner",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[o("circle",{cx:"32",cy:"32",r:"29",fill:"transparent",stroke:"#ddd","stroke-width":"2"},[o("animateTransform",{attributeName:"transform",type:"rotate",from:"0 32 32",to:"360 32 32",begin:"0s",dur:"1.555s",repeatCount:"indefinite"})])],-1)),H=b(()=>o("svg",{class:"play",version:"1.1",viewBox:"0 0 68 48"},[o("path",{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#f00"}),o("path",{d:"M 45,24 27,14 27,34",fill:"#fff"})],-1)),J=Object.assign({inheritAttrs:!1},{__name:"BoosterYoutube",setup(t){return(e,a)=>(p(),E(V(U),g({class:"nuxt-booster-youtube"},e.$attrs),{beforePlayer:i(()=>[s(e.$slots,"beforePlayer",{},void 0,!0)]),"loading-spinner":i(()=>[s(e.$slots,"loading-spinner",{},()=>[F],!0)]),play:i(()=>[s(e.$slots,"play",{},()=>[H],!0)]),afterPlayer:i(()=>[s(e.$slots,"afterPlayer",{},void 0,!0)]),_:3},16))}}),ae=m(J,[["__scopeId","data-v-df512f8a"]]);export{ae as D};
