var S=Object.defineProperty;var I=(t,e,s)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var u=(t,e,s)=>I(t,typeof e!="symbol"?e+"":e,s);import{u as C}from"./4HyzP8g-.js";import{D}from"./CbxA9AgJ.js";import{D as k,a as B}from"./D_bUCz30.js";import{_ as $}from"./-OjZ-Cgd.js";import{_ as m,r as N,C as x,ab as A,O as y,o as p,c as f,A as a,x as d,b as h,w as o,m as g,i as L,l as j,u as Y,p as E,e as z,a as i}from"./BofD5FCQ.js";const w=new k;typeof window<"u"&&(window.onYouTubeIframeAPIReady=()=>{w.resolve(window.YT)});const O=()=>({key:"youtube",src:"https://www.youtube.com/iframe_api",async:!0,defer:!0}),V=()=>w.promise;class R{constructor(){u(this,"api");u(this,"players",new Map)}play(e){return this.pausePlayers(),e.playVideo()}pausePlayers(e){Array.from(this.players.values()).filter(s=>!e||e&&s!==e).filter(s=>s.getPlayerState).forEach(s=>{s.getPlayerState()===this.api.PlayerState.PLAYING&&s.pauseVideo()})}async createPlayer(...e){this.api=await V();const s=new this.api.Player(...e);return s.addEventListener("onStateChange",({data:c})=>{this.api.PlayerState.PLAYING===c&&this.pausePlayers(s)}),this.add(s),s}add(e){this.players.set(e.id,e)}remove(e){this.players.delete(e.id),e.destroy()}}const l=new R,T={components:{BoosterPicture:$,DefaultButton:D},props:{autoplay:{type:Boolean,default:!1},mute:{type:Boolean,default:void 0},url:{type:String,required:!0},title:{type:String,required:!0},host:{type:String,default:"https://www.youtube-nocookie.com"},options:{type:Object,default(){return{}}},posterSizes:{type:Object,default(){return{default:"100vw",xxs:"100vw",xs:"100vw",sm:"100vw",md:"100vw",lg:"100vw",xl:"100vw",xxl:"100vw"}}},posterDensities:{type:[String,Number],default:void 0}},emits:["ready","playing"],setup(){const t=N([]);return C({script:x(()=>t.value)}),{script:t}},data(){return{src:null,videoId:new URL(this.url).searchParams.get("v"),player:null,ready:!1,loading:!1,playing:!1,landscape:!1,isTouchDevice:B()}},computed:{pictureDataset(){return{formats:this.$booster.targetFormats,title:this.title,sources:[{src:`/youtube/vi/${this.videoId}/maxresdefault.jpg`,sizes:this.posterSizes,media:"all",densities:this.posterDensities}]}}},mounted(){this.autoplay&&this.onInit()},unmounted(){this.player&&l.remove(this.player)},methods:{reset(){this.src=null,this.ready=!1,this.playing=!1},onInit(){this.loading=!0;const t={rel:0,enablejsapi:1,autoplay:0,modestbranding:1,showinfo:0,iv_load_policy:3,...this.options,playsinline:1,mute:Number(this.isTouchDevice)||Number(this.mute)};this.src=`${this.host}/embed/${this.videoId}?`+Object.entries(t).map(([e,s])=>`${e}=${s}`).join("&"),this.script=[O()]},async onLoad(){this.player=A(await l.createPlayer(this.$refs.player,{videoId:this.videoId,host:this.host,events:{onReady:t=>{t.target.mute(),l.play(t.target),this.loading=!1,this.ready=!0,this.$emit("ready",{iframe:t.target.getIframe(),player:this.player})},onStateChange:t=>this.onPlayerStateChange(l.api,t.data)}}))},onPlayerStateChange(t,e){e===t.PlayerState.PLAYING?this.playing=!0:(e===t.PlayerState.ENDED||e===t.PlayerState.PAUSED)&&(this.playing=!1),this.$emit("playing",this.playing)}}},G=["title","src"];function M(t,e,s,c,r,n){const b=y("booster-picture"),_=y("default-button");return p(),f("div",{class:L({ready:r.ready,playing:r.playing})},[a(t.$slots,"beforePlayer",{},void 0,!0),r.src?(p(),f("iframe",{key:0,ref:"player",title:s.title,class:"player",src:r.src,allow:"accelerometer; fullscreen; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:e[0]||(e[0]=(...P)=>n.onLoad&&n.onLoad(...P))},null,40,G)):d("",!0),h(_,{onClick:n.onInit},{default:o(()=>[h(b,g({class:"poster"},n.pictureDataset,{title:s.title}),null,16,["title"]),r.loading?a(t.$slots,"loading-spinner",{key:0},void 0,!0):d("",!0),!r.ready&&!r.loading?a(t.$slots,"play",{key:1},void 0,!0):d("",!0)]),_:3},8,["onClick"]),a(t.$slots,"afterPlayer",{},void 0,!0)],2)}const q=m(T,[["render",M],["__scopeId","data-v-12f78775"]]),v=t=>(E("data-v-df512f8a"),t=t(),z(),t),U=v(()=>i("svg",{class:"loader loading-spinner",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[i("circle",{cx:"32",cy:"32",r:"29",fill:"transparent",stroke:"#ddd","stroke-width":"2"},[i("animateTransform",{attributeName:"transform",type:"rotate",from:"0 32 32",to:"360 32 32",begin:"0s",dur:"1.555s",repeatCount:"indefinite"})])],-1)),F=v(()=>i("svg",{class:"play",version:"1.1",viewBox:"0 0 68 48"},[i("path",{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#f00"}),i("path",{d:"M 45,24 27,14 27,34",fill:"#fff"})],-1)),H=Object.assign({inheritAttrs:!1},{__name:"BoosterYoutube",setup(t){return(e,s)=>(p(),j(Y(q),g({class:"nuxt-booster-youtube"},e.$attrs),{beforePlayer:o(()=>[a(e.$slots,"beforePlayer",{},void 0,!0)]),"loading-spinner":o(()=>[a(e.$slots,"loading-spinner",{},()=>[U],!0)]),play:o(()=>[a(e.$slots,"play",{},()=>[F],!0)]),afterPlayer:o(()=>[a(e.$slots,"afterPlayer",{},void 0,!0)]),_:3},16))}}),ee=m(H,[["__scopeId","data-v-df512f8a"]]);export{ee as D};
