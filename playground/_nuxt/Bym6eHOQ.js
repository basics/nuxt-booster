var z=Object.defineProperty;var G=(o,e,t)=>e in o?z(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var g=(o,e,t)=>G(o,typeof e!="symbol"?e+"":e,t);import{u as R,D as M}from"./C5jRfeDg.js";import{D as T,a as U}from"./DgtSUNKI.js";import{_ as q}from"./KuqAczfF.js";import{e as B,r as i,k as O,ad as F,u as H,G as h,c as C,o as P,D as u,y as b,b as k,w as d,m as D,z as x,a6 as J,_ as I,i as K,a as p}from"./-PVpcgK8.js";import{u as Q}from"./DMlCBjHk.js";const N=new T;typeof window<"u"&&(window.onYouTubeIframeAPIReady=()=>{N.resolve(window.YT)});function W(){return{key:"youtube",src:"https://www.youtube.com/iframe_api",async:!0,defer:!0}}const X=()=>N.promise;class Z{constructor(){g(this,"api");g(this,"players",[])}play(e){return this.pausePlayers(),e.playVideo()}pausePlayers(e){Array.from(this.players.values()).filter(t=>!e||e&&t!==e).filter(t=>t.getPlayerState).forEach(t=>{var r;t.getPlayerState()===((r=this.api)==null?void 0:r.PlayerState.PLAYING)&&t.pauseVideo()})}async createPlayer(e,t){this.api=await X();const r=new this.api.Player(e,t);return r.addEventListener("onStateChange",({data:c})=>{var n;((n=this.api)==null?void 0:n.PlayerState.PLAYING)===c&&this.pausePlayers(r)}),this.add(r),r}add(e){this.players.push(e)}remove(e){this.players=this.players.filter(t=>t!==e),e.destroy()}}const A={autoplay:{type:Boolean,default:!1},mute:{type:Boolean,default:void 0},url:{type:String,required:!0},title:{type:String,required:!0},host:{type:String,default:"https://www.youtube-nocookie.com"},options:{type:Object,default(){return{}}},posterSources:{type:Array,default(){return[{src:void 0,media:"all",sizes:{default:"100vw"}}]}}},ee=["title","src"],te=B({__name:"Base",props:A,emits:["ready","playing"],setup(o,{emit:e}){Q();const t=R(),r=new Z,c=i([]),n=i(),y=i(),S=i(),v=i(!1),f=i(!1),m=i(!1),E=i(U()),l=o,$=e;O(()=>{l.autoplay&&_()}),F(()=>{y.value&&r.remove(y.value)}),H({script:h(()=>c.value)});const w=h(()=>l.url&&new URL(l.url).searchParams.get("v")||void 0),Y=h(()=>({formats:t.targetFormats,title:l.title,sources:l.posterSources.map(a=>({...a,src:a.src||`/youtube/vi/${w.value}/maxresdefault.jpg`}))}));function _(){f.value=!0;const a={rel:0,enablejsapi:1,autoplay:0,modestbranding:1,showinfo:0,iv_load_policy:3,...l.options,playsinline:1,mute:Number(E.value)||Number(l.mute)};n.value=`${l.host}/embed/${w.value}?`+Object.entries(a).map(([s,V])=>`${s}=${V}`).join("&"),c.value=[W()]}async function L(){const a=await r.createPlayer(S.value,{videoId:w.value,host:l.host,events:{onReady:s=>{s.target.mute(),r.play(s.target),f.value=!1,v.value=!0,$("ready",{iframe:s.target.getIframe(),player:y})},onStateChange:s=>r.api&&j(r.api,s.data)}});y.value=J(a)}function j(a,s){s===a.PlayerState.PLAYING?m.value=!0:(s===a.PlayerState.ENDED||s===a.PlayerState.PAUSED)&&(m.value=!1),$("playing",m.value)}return(a,s)=>(P(),C("div",{class:x({ready:v.value,playing:m.value})},[u(a.$slots,"beforePlayer",{},void 0,!0),n.value?(P(),C("iframe",{key:0,ref_key:"playerEl",ref:S,title:a.title,class:"player",src:n.value,allow:"accelerometer; fullscreen; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:L},null,40,ee)):b("",!0),k(M,{onClick:_},{default:d(()=>[k(q,D({class:"poster"},Y.value,{title:a.title}),null,16,["title"]),f.value?u(a.$slots,"loading-spinner",{key:0},void 0,!0):b("",!0),!v.value&&!f.value?u(a.$slots,"play",{key:1},void 0,!0):b("",!0)]),_:3}),u(a.$slots,"afterPlayer",{},void 0,!0)],2))}}),ae=I(te,[["__scopeId","data-v-ae16e927"]]),re=B({__name:"BoosterYoutube",props:A,setup(o){return(e,t)=>(P(),K(ae,D({class:"nuxt-booster-youtube"},e.$props),{beforePlayer:d(()=>[u(e.$slots,"beforePlayer",{},void 0,!0)]),"loading-spinner":d(()=>[u(e.$slots,"loading-spinner",{},()=>[t[0]||(t[0]=p("svg",{class:"loader loading-spinner",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[p("circle",{cx:"32",cy:"32",r:"29",fill:"transparent",stroke:"#ddd","stroke-width":"2"},[p("animateTransform",{attributeName:"transform",type:"rotate",from:"0 32 32",to:"360 32 32",begin:"0s",dur:"1.555s",repeatCount:"indefinite"})])],-1))],!0)]),play:d(()=>[u(e.$slots,"play",{},()=>[t[1]||(t[1]=p("svg",{class:"play",version:"1.1",viewBox:"0 0 68 48"},[p("path",{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#f00"}),p("path",{d:"M 45,24 27,14 27,34",fill:"#fff"})],-1))],!0)]),afterPlayer:d(()=>[u(e.$slots,"afterPlayer",{},void 0,!0)]),_:3},16))}}),pe=I(re,[["__scopeId","data-v-24293647"]]);export{pe as D};
