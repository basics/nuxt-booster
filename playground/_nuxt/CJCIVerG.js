var m=Object.defineProperty;var w=(e,t,i)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var s=(e,t,i)=>(w(e,typeof t!="symbol"?t+"":t,i),i);import{J as $,a4 as S,Q as x}from"./D0ffOfkK.js";function L(){return new URL(window.location.href)}function O(e){let t=0;if(e.length===0)return t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);t=(t<<5)-t+r,t=t&t}return t}function a(e){return O(e).toString(16)}function o(e){return e.split(`
`).map(t=>t.trim()).join(" ")}const N=["avif","webp","png","jpg","gif"],R="jpg",q=e=>{const{pathname:t}=x(e),i=/[.]/.exec(t)&&/[^.]+$/.exec(t)[0];return N.includes(i)?i:R};async function v(e,t,i){window.Image?e=e.modify({src:t}):e=e.modify({src:$(t)?t:S(t,L().origin)});const{width:r,height:n}=await i.getImageSize(e.src);return e.modify({width:r,height:n})}class h{constructor({src:t,sizes:i,width:r,height:n,media:d="all",quality:u=70,format:l=null,preload:c=!1,modifiers:g={},provider:f=void 0,preset:p=void 0,densities:y=void 0}){s(this,"src",null);s(this,"sizes",null);s(this,"media",null);s(this,"width",null);s(this,"height",null);s(this,"format",null);s(this,"quality",null);s(this,"preload",!1);s(this,"modifiers",{});s(this,"provider");s(this,"preset");s(this,"densities");this.src=t,this.sizes=i,this.media=d,this.width=r,this.height=n,this.format=z(t,l),this.quality=u,this.preload=c,this.modifiers=g,this.provider=f,this.preset=p,this.densities=y}get key(){return a(JSON.stringify(this.toJSON()))}get ratio(){return this.width/this.height}get className(){return`image-${a(C(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(t){return{provider:this.provider,preset:this.preset,densities:this.densities||t.densities}}getMeta(t,i){return v(new h({...this.toJSON()}),t,i)}getPreload(t,i,r){const n={rel:"preload",as:"image",imagesrcset:t,imagesizes:i,media:this.media};return r&&(n.crossorigin=r),n}modify(t){return new h({...this.toJSON(),...t})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...t){return new this(...t)}}function z(e,t){const i=q(e);return t!=null&&t.includes(i)?i:t||i}function C(e){if(e.startsWith("/"))return e;const t=new URL(e);return t.pathname+t.search+t.hash}function D(e,t){return{key:t,type:"text/css",children:o(new h(e.value).style)}}function F(e,t){return{key:t.picture,type:"text/css",children:o(e.style)}}function P(e,t,i="high",r="anonymous",n=()=>{}){return{tagPriority:2,fetchpriority:i,"data-key":a(`${e.family}-${e.weight}-${e.style}-${t}`.toLowerCase()),key:a(`${e.family}-${e.weight}-${e.style}-${t}`.toLowerCase()),rel:"preload",as:"font",crossorigin:r,href:e.src,type:e.type,media:t,onload:n}}function U(e,t=!1,i=void 0){return t?J(`<style>${e}</style>`,i):{key:i,type:"text/css",children:o(e)}}function J(e,t=void 0){return{key:t,innerHTML:o(e)}}export{h as S,P as a,D as b,F as c,U as g,C as n,a as t};
