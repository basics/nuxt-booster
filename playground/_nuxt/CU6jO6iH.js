var T=Object.defineProperty;var G=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var m=(t,e,s)=>G(t,typeof e!="symbol"?e+"":e,s);import{e as q,Z,S as N,$ as E,a0 as Y,a1 as C,a2 as K,U as O,a3 as V,a4 as j,K as F,v as X,a5 as Q,r as y,G as _,a6 as R,u as ee,a7 as te,c as ie,o as se,m as re,h as oe,_ as ne}from"./aeGaSYzh.js";import{t as L,g as ae}from"./CP0yG-nE.js";import{g as ce}from"./zFTNeEoO.js";import{u as de}from"./DkuYp27I.js";const De=q({name:"HydrationWrapper",setup(t,{slots:e}){const s=e.default?e.default():[];return()=>ue(s)}}),ue=t=>t.length===1?t[0]:t;function he(t){return new URL(window.location.href)}const A=["avif","webp","png","jpg","gif"],le="jpg",fe=t=>{const{pathname:e}=E(t),i=(Y(e,{strict:!1})||"").match(/\.([^.]+)$/),r=i?i[1]:"";return r&&A.includes(r)||A.includes(r)?r:le};async function me(t,e,s){window.Image?t=t.modify({src:e}):t=t.modify({src:N(e)?e:Z(e,he().origin)});const{width:i,height:r}=await s.getImageSize(t.src);return t.modify({width:i,height:r})}class S{constructor({src:e,sizes:s,width:i,height:r,media:o="all",quality:n=70,format:a=void 0,preload:c=!1,modifiers:u={},provider:g=void 0,preset:l=void 0,densities:d=void 0}){m(this,"src");m(this,"media");m(this,"sizes");m(this,"width");m(this,"height");m(this,"format");m(this,"quality");m(this,"preload");m(this,"modifiers");m(this,"provider");m(this,"preset");m(this,"densities");this.src=e,this.sizes=s,this.media=o,this.width=i,this.height=r,this.format=ge(e,a),this.quality=n,this.preload=c||!1,this.modifiers=u,this.provider=g,this.preset=l,this.densities=d}get key(){return L(JSON.stringify(this.toJSON()))}get ratio(){return(this.width??0)/(this.height??0)}get className(){return`image-${L(pe(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,s){return me(new S({...this.toJSON()}),e,s)}getPreload(e,s,i){return{rel:"preload",as:"image",imagesrcset:e,imagesizes:s,media:this.media,crossorigin:i}}modify(e){return new S({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function ge(t,e){const s=fe(t);return e!=null&&e.includes(s)?s:e||s}function pe(t){if(t.startsWith("/"))return t;const e=new URL(t);return e.pathname+e.search+e.hash}function ve(t){return["anonymous","use-credentials",void 0].includes(t)}const we={source:{type:[S,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){},validator:ve}};async function ye(t,e){return await _e(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function _e(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,s)=>{const i=new Image;i.onload=()=>{const r={width:i.width,height:i.height,ratio:i.width/i.height};e(r)},i.onerror=r=>s(r),i.src=t})}function B(t){return e=>e?t[e]||e:t.missingValue}function Se({formatter:t,keyMap:e,joinWith:s="/",valueMap:i}={}){t||(t=(o,n)=>`${o}=${n}`),e&&typeof e!="function"&&(e=B(e));const r=i||{};return Object.keys(r).forEach(o=>{typeof r[o]!="function"&&(r[o]=B(r[o]))}),(o={})=>Object.entries(o).filter(([a,c])=>typeof c<"u").map(([a,c])=>{const u=r[a];return typeof u=="function"&&(c=u(o[a])),a=typeof e=="function"?e(a):a,t(a,c)}).join(s)}function I(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function $e(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const s of t.split(" ")){const i=Number.parseInt(s.replace("x",""));i&&e.add(i)}return Array.from(e)}function be(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function xe(t){const e={};if(typeof t=="string")for(const s of t.split(/[\s,]+/).filter(i=>i)){const i=s.split(":");i.length!==2?e["1px"]=i[0].trim():e[i[0].trim()]=i[1].trim()}else Object.assign(e,t);return e}function ze(t){const e={options:t},s=(r,o={})=>J(e,r,o),i=(r,o={},n={})=>s(r,{...n,modifiers:C(o,n.modifiers||{})}).url;for(const r in t.presets)i[r]=(o,n,a)=>i(o,n,{...t.presets[r],...a});return i.options=t,i.getImage=s,i.getMeta=(r,o)=>Me(e,r,o),i.getSizes=(r,o)=>Ne(e,r,o),e.$img=i,i}async function Me(t,e,s){const i=J(t,e,{...s});return typeof i.getMeta=="function"?await i.getMeta():await ye(t,i.url)}function J(t,e,s){var u,g;if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{provider:i,defaults:r}=We(t,s.provider||t.options.provider),o=Ie(t,s.preset);if(e=N(e)?e:K(e),!i.supportsAlias){for(const l in t.options.alias)if(e.startsWith(l)){const d=t.options.alias[l];d&&(e=O(d,e.slice(l.length)))}}if(i.validateDomains&&N(e)){const l=E(e).host;if(!t.options.domains.find(d=>d===l))return{url:e}}const n=C(s,o,r);n.modifiers={...n.modifiers};const a=n.modifiers.format;(u=n.modifiers)!=null&&u.width&&(n.modifiers.width=I(n.modifiers.width)),(g=n.modifiers)!=null&&g.height&&(n.modifiers.height=I(n.modifiers.height));const c=i.getImage(e,n,t);return c.format=c.format||a||"",c}function We(t,e){const s=t.options.providers[e];if(!s)throw new Error("Unknown provider: "+e);return s}function Ie(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function Ne(t,e,s){var $,b,x,M,W;const i=I(($=s.modifiers)==null?void 0:$.width),r=I((b=s.modifiers)==null?void 0:b.height),o=xe(s.sizes),n=(x=s.densities)!=null&&x.trim()?$e(s.densities.trim()):t.options.densities;be(n);const a=i&&r?r/i:0,c=[],u=[];if(Object.keys(o).length>=1){for(const f in o){const v=P(f,String(o[f]),r,a,t);if(v!==void 0){c.push({size:v.size,screenMaxWidth:v.screenMaxWidth,media:`(max-width: ${v.screenMaxWidth}px)`});for(const w of n)u.push({width:v._cWidth*w,src:H(t,e,s,v,w)})}}Oe(c)}else for(const f of n){const v=Object.keys(o)[0];let w=v?P(v,String(o[v]),r,a,t):void 0;w===void 0&&(w={size:"",screenMaxWidth:0,_cWidth:(M=s.modifiers)==null?void 0:M.width,_cHeight:(W=s.modifiers)==null?void 0:W.height}),u.push({width:f,src:H(t,e,s,w,f)})}je(u);const g=u[u.length-1],l=c.length?c.map(f=>`${f.media?f.media+" ":""}${f.size}`).join(", "):void 0,d=l?"w":"x",p=u.map(f=>`${f.src} ${f.width}${d}`).join(", ");return{sizes:l,srcset:p,src:g==null?void 0:g.src}}function P(t,e,s,i,r){const o=r.options.screens&&r.options.screens[t]||Number.parseInt(t),n=e.endsWith("vw");if(!n&&/^\d+$/.test(e)&&(e=e+"px"),!n&&!e.endsWith("px"))return;let a=Number.parseInt(e);if(!o||!a)return;n&&(a=Math.round(a/100*o));const c=i?Math.round(a*i):s;return{size:e,screenMaxWidth:o,_cWidth:a,_cHeight:c}}function H(t,e,s,i,r){return t.$img(e,{...s.modifiers,width:i._cWidth?i._cWidth*r:void 0,height:i._cHeight?i._cHeight*r:void 0},s)}function Oe(t){var s;t.sort((i,r)=>i.screenMaxWidth-r.screenMaxWidth);let e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.media===e&&t.splice(i,1),e=r.media}for(let i=0;i<t.length;i++)t[i].media=((s=t[i+1])==null?void 0:s.media)||""}function je(t){t.sort((s,i)=>s.width-i.width);let e=null;for(let s=t.length-1;s>=0;s--){const i=t[s];i.width===e&&t.splice(s,1),e=i.width}}const Re=Se({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>j(t)+"_"+j(e)}),Le=(t,{modifiers:e={},baseURL:s}={},i)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const r=Re(e)||"_";return s||(s=O(i.options.nuxt.baseURL,"/_ipx")),{url:O(s,r,V(t))}},Ae=!0,Be=!0,Pe=Object.freeze(Object.defineProperty({__proto__:null,getImage:Le,supportsAlias:Be,validateDomains:Ae},Symbol.toStringTag,{value:"Module"})),k={screens:{xs:576,sm:768,md:996,lg:1200,xl:1367,xxl:1600,"2xl":1536,default:320,xxs:480,"4k":1921},presets:{},provider:"ipxStatic",domains:["picsum.photos","img.youtube.com","i.vimeocdn.com","i.pickadummy.com"],alias:{"/picsum":"https://picsum.photos","/youtube":"https://img.youtube.com","/vimeo":"https://i.vimeocdn.com","/pickadummy":"https://i.pickadummy.com"},densities:[1,2],format:["webp"]};k.providers={ipxStatic:{provider:Pe,defaults:{}}};const He=()=>{const t=X(),e=F();return e.$img||e._img||(e._img=ze({...k,nuxt:{baseURL:t.app.baseURL},runtimeConfig:t}))};var U={};const Ue=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],qe=q({inheritAttrs:!1,__name:"Base",props:we,emits:["load"],async setup(t,{emit:e}){let s,i;const r=Q(),o=t,n=e,a=He(),c=F().$booster,{isCritical:u}=de(),g=y(!0),l=y(),d=y(),p=y(),$=y(),b=y(),x=_(()=>ce(o.crossorigin||c.crossorigin)),M=_(()=>{var z;const h={loading:g.value};return(z=p.value)!=null&&z.className&&(h[p.value.className]=!0),h}),W=_(()=>{var h;return r.width||((h=l.value)==null?void 0:h.width)}),f=_(()=>{var h;return r.height||((h=l.value)==null?void 0:h.height)}),v=_(()=>u.value?"eager":"lazy"),w=_(()=>!o.source||new S(o.source).format!=="svg"?"async":"sync");function D(h){g.value=!1,n("load",h.target)}if(o.source){p.value=R(new S(o.source)),d.value=a.getSizes(p.value.src,{sizes:p.value.sizes,modifiers:p.value.getModifiers(),...p.value.getOptions(c)}),$.value=d.value.srcset||d.value.src,b.value=d.value.sizes;const h=y({});if(ee(()=>h.value),d.value&&d.value.src){try{l.value=R(([s,i]=te(()=>p.value.getMeta(d.value.src,c)),s=await s,i(),s))}catch(z){console.error(z)}h.value={style:[l.value&&ae(p.value)].filter(Boolean),link:[!(!d.value||!u.value)&&U.prerender&&p.value.getPreload(d.value.srcset,d.value.sizes,x.value)].filter(Boolean),noscript:[U.prerender&&{key:"img-nojs",children:"<style>img { content-visibility: unset !important; }</style>"}].filter(Boolean)}}}else g.value=!1;return(h,z)=>(se(),ie("img",re(oe(r),{srcset:$.value,sizes:b.value,width:W.value,height:f.value,class:["nuxt-booster-image",M.value],title:h.title,alt:h.alt||h.title,loading:v.value,decoding:w.value,crossorigin:x.value,onLoad:D}),null,16,Ue))}}),Te=ne(qe,[["__scopeId","data-v-6428eb1c"]]);export{Te as B,De as H,S,ve as c,we as i,pe as n,He as u};
