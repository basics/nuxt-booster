var F=Object.defineProperty;var J=(t,e,s)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var m=(t,e,s)=>J(t,typeof e!="symbol"?e+"":e,s);import{G as T,P as I,a8 as G,a9 as C,aa as V,R as O,ab as L,ac as Q,ad as N,H as E,s as X,_ as Y,a5 as Z,r as y,C as _,ae as R,af as K,o as ee,c as te,m as ie,u as se}from"./DnIrnv4q.js";import{t as A,b as re}from"./BRWpFFLA.js";import{g as ne}from"./D69WGEc8.js";import{u as oe}from"./CTZTlq9y.js";import{u as ae}from"./BkITTb6B.js";function ce(t){return new URL(window.location.href)}const Je=T({name:"HydrationWrapper",setup(t,{slots:e}){return()=>de(e.default())}}),de=t=>t.length===1?t[0]:t,ue=["avif","webp","png","jpg","gif"],le="jpg",he=t=>{const{pathname:e}=C(t),s=/[.]/.exec(e)&&/[^.]+$/.exec(e)[0];return ue.includes(s)?s:le};async function fe(t,e,s){window.Image?t=t.modify({src:e}):t=t.modify({src:I(e)?e:G(e,ce().origin)});const{width:i,height:r}=await s.getImageSize(t.src);return t.modify({width:i,height:r})}class ${constructor({src:e,sizes:s,width:i,height:r,media:n="all",quality:o=70,format:a=null,preload:c=!1,modifiers:d={},provider:g=void 0,preset:h=void 0,densities:u=void 0}){m(this,"src",null);m(this,"sizes",null);m(this,"media",null);m(this,"width",null);m(this,"height",null);m(this,"format",null);m(this,"quality",null);m(this,"preload",!1);m(this,"modifiers",{});m(this,"provider");m(this,"preset");m(this,"densities");this.src=e,this.sizes=s,this.media=n,this.width=i,this.height=r,this.format=me(e,a),this.quality=o,this.preload=c,this.modifiers=d,this.provider=g,this.preset=h,this.densities=u}get key(){return A(JSON.stringify(this.toJSON()))}get ratio(){return this.width/this.height}get className(){return`image-${A(ge(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,s){return fe(new $({...this.toJSON()}),e,s)}getPreload(e,s,i){const r={rel:"preload",as:"image",imagesrcset:e,imagesizes:s,media:this.media};return i&&(r.crossorigin=i),r}modify(e){return new $({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function me(t,e){const s=he(t);return e!=null&&e.includes(s)?s:e||s}function ge(t){if(t.startsWith("/"))return t;const e=new URL(t);return e.pathname+e.search+e.hash}function pe(t){return["anonymous","use-credentials"].includes(t)}const ve={source:{type:[$,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:pe}};async function we(t,e){return await ye(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function ye(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,s)=>{const i=new Image;i.onload=()=>{const r={width:i.width,height:i.height,ratio:i.width/i.height};e(r)},i.onerror=r=>s(r),i.src=t})}function P(t){return e=>e?t[e]||e:t.missingValue}function _e({formatter:t,keyMap:e,joinWith:s="/",valueMap:i}={}){t||(t=(n,o)=>`${n}=${o}`),e&&typeof e!="function"&&(e=P(e));const r=i||{};return Object.keys(r).forEach(n=>{typeof r[n]!="function"&&(r[n]=P(r[n]))}),(n={})=>Object.entries(n).filter(([a,c])=>typeof c<"u").map(([a,c])=>{const d=r[a];return typeof d=="function"&&(c=d(n[a])),a=typeof e=="function"?e(a):a,t(a,c)}).join(s)}function W(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function $e(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const s of t.split(" ")){const i=Number.parseInt(s.replace("x",""));i&&e.add(i)}return Array.from(e)}function Se(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function be(t){const e={};if(typeof t=="string")for(const s of t.split(/[\s,]+/).filter(i=>i)){const i=s.split(":");i.length!==2?e["1px"]=i[0].trim():e[i[0].trim()]=i[1].trim()}else Object.assign(e,t);return e}function xe(t){const e={options:t},s=(r,n={})=>U(e,r,n),i=(r,n={},o={})=>s(r,{...o,modifiers:L(n,o.modifiers||{})}).url;for(const r in t.presets)i[r]=(n,o,a)=>i(n,o,{...t.presets[r],...a});return i.options=t,i.getImage=s,i.getMeta=(r,n)=>ze(e,r,n),i.getSizes=(r,n)=>Ie(e,r,n),e.$img=i,i}async function ze(t,e,s){const i=U(t,e,{...s});return typeof i.getMeta=="function"?await i.getMeta():await we(t,i.url)}function U(t,e,s){var d,g;if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{provider:i,defaults:r}=Me(t,s.provider||t.options.provider),n=We(t,s.preset);if(e=I(e)?e:V(e),!i.supportsAlias){for(const h in t.options.alias)if(e.startsWith(h)){const u=t.options.alias[h];u&&(e=O(u,e.slice(h.length)))}}if(i.validateDomains&&I(e)){const h=C(e).host;if(!t.options.domains.find(u=>u===h))return{url:e}}const o=L(s,n,r);o.modifiers={...o.modifiers};const a=o.modifiers.format;(d=o.modifiers)!=null&&d.width&&(o.modifiers.width=W(o.modifiers.width)),(g=o.modifiers)!=null&&g.height&&(o.modifiers.height=W(o.modifiers.height));const c=i.getImage(e,o,t);return c.format=c.format||a||"",c}function Me(t,e){const s=t.options.providers[e];if(!s)throw new Error("Unknown provider: "+e);return s}function We(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function Ie(t,e,s){var S,b,x,z,M;const i=W((S=s.modifiers)==null?void 0:S.width),r=W((b=s.modifiers)==null?void 0:b.height),n=be(s.sizes),o=(x=s.densities)!=null&&x.trim()?$e(s.densities.trim()):t.options.densities;Se(o);const a=i&&r?r/i:0,c=[],d=[];if(Object.keys(n).length>=1){for(const f in n){const p=B(f,String(n[f]),r,a,t);if(p!==void 0){c.push({size:p.size,screenMaxWidth:p.screenMaxWidth,media:`(max-width: ${p.screenMaxWidth}px)`});for(const w of o)d.push({width:p._cWidth*w,src:H(t,e,s,p,w)})}}Oe(c)}else for(const f of o){const p=Object.keys(n)[0];let w=p?B(p,String(n[p]),r,a,t):void 0;w===void 0&&(w={size:"",screenMaxWidth:0,_cWidth:(z=s.modifiers)==null?void 0:z.width,_cHeight:(M=s.modifiers)==null?void 0:M.height}),d.push({width:f,src:H(t,e,s,w,f)})}je(d);const g=d[d.length-1],h=c.length?c.map(f=>`${f.media?f.media+" ":""}${f.size}`).join(", "):void 0,u=h?"w":"x",v=d.map(f=>`${f.src} ${f.width}${u}`).join(", ");return{sizes:h,srcset:v,src:g==null?void 0:g.src}}function B(t,e,s,i,r){const n=r.options.screens&&r.options.screens[t]||Number.parseInt(t),o=e.endsWith("vw");if(!o&&/^\d+$/.test(e)&&(e=e+"px"),!o&&!e.endsWith("px"))return;let a=Number.parseInt(e);if(!n||!a)return;o&&(a=Math.round(a/100*n));const c=i?Math.round(a*i):s;return{size:e,screenMaxWidth:n,_cWidth:a,_cHeight:c}}function H(t,e,s,i,r){return t.$img(e,{...s.modifiers,width:i._cWidth?i._cWidth*r:void 0,height:i._cHeight?i._cHeight*r:void 0},s)}function Oe(t){var s;t.sort((i,r)=>i.screenMaxWidth-r.screenMaxWidth);let e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.media===e&&t.splice(i,1),e=r.media}for(let i=0;i<t.length;i++)t[i].media=((s=t[i+1])==null?void 0:s.media)||""}function je(t){t.sort((s,i)=>s.width-i.width);let e=null;for(let s=t.length-1;s>=0;s--){const i=t[s];i.width===e&&t.splice(s,1),e=i.width}}const Ne=_e({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>N(t)+"_"+N(e)}),Re=(t,{modifiers:e={},baseURL:s}={},i)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const r=Ne(e)||"_";return s||(s=O(i.options.nuxt.baseURL,"/_ipx")),{url:O(s,r,Q(t))}},Ae=!0,Pe=!0,Be=Object.freeze(Object.defineProperty({__proto__:null,getImage:Re,supportsAlias:Pe,validateDomains:Ae},Symbol.toStringTag,{value:"Module"})),k={screens:{xs:576,sm:768,md:996,lg:1200,xl:1367,xxl:1600,"2xl":1536,default:320,xxs:480,"4k":1921},presets:{},provider:"ipxStatic",domains:["picsum.photos","img.youtube.com","i.vimeocdn.com","i.pickadummy.com"],alias:{"/picsum":"https://picsum.photos","/youtube":"https://img.youtube.com","/vimeo":"https://i.vimeocdn.com","/pickadummy":"https://i.pickadummy.com"},densities:[1,2],format:["webp"]};k.providers={ipxStatic:{provider:Be,defaults:{}}};const He=()=>{const t=X(),e=E();return e.$img||e._img||(e._img=xe({...k,nuxt:{baseURL:t.app.baseURL},runtimeConfig:t}))};var q={};const qe=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],Ce=Object.assign({inheritAttrs:!1},{__name:"Base",props:ve,emits:["load"],async setup(t,{emit:e}){let s,i;const r=Z(),n=t,o=e,a=He(),c=E().$booster,{isCritical:d}=oe(),g=y(!0),h=y(null),u=y(null),v=y(null),S=y(null),b=y(null),x=_(()=>ne(n.crossorigin||c.crossorigin)),z=_(()=>{var l;return[{loading:g.value}].concat((l=v.value)==null?void 0:l.className)}),M=_(()=>{var l;return r.width||((l=h.value)==null?void 0:l.width)}),f=_(()=>{var l;return r.height||((l=h.value)==null?void 0:l.height)}),p=_(()=>d.value?"eager":"lazy"),w=_(()=>!n.source||new $(n.source).format!=="svg"?"async":"sync"),D=l=>{g.value=!1,o("load",l.target)};if(n.source){v.value=R(new $(n.source)),u.value=a.getSizes(v.value.src,{sizes:v.value.sizes,modifiers:v.value.getModifiers(),...v.value.getOptions(c)}),S.value=u.value.srcset||u.value.src,b.value=u.value.sizes;const l=y({});ae(()=>l.value);try{h.value=R(([s,i]=K(()=>v.value.getMeta(u.value.src,c)),s=await s,i(),s))}catch(j){console.error(j)}l.value={style:[h.value&&re(v.value)].filter(Boolean),link:[!(!u.value||!d.value)&&q.prerender&&v.value.getPreload(u.value.srcset,u.value.sizes,x.value)].filter(Boolean),noscript:[q.prerender&&{key:"img-nojs",children:"<style>img { content-visibility: unset !important; }</style>"}].filter(Boolean)}}else g.value=!1;return(l,j)=>(ee(),te("img",ie(se(r),{srcset:S.value,sizes:b.value,width:M.value,height:f.value,class:["nuxt-booster-image",z.value],title:l.title,alt:l.alt||l.title,loading:p.value,decoding:w.value,crossorigin:x.value,onLoad:D}),null,16,qe))}}),Te=Y(Ce,[["__scopeId","data-v-3621510f"]]);export{Te as B,Je as H,$ as S,pe as c,ve as i,ge as n,He as u};
