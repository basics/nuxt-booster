import{u as V,D as R}from"./D9-19Lsm.js";import{D as q,a as z}from"#entry";import{_ as G}from"./BiMvVb17.js";import{e as C,j as l,q as M,ad as T,u as U,B as g,c as B,o as b,Y as i,p as h,b as _,w as u,m as k,s as O,a6 as F,_ as I,k as H,a as n}from"./LxM7NZv2.js";import{a as x}from"./BDuYyG4j.js";const N=new q;typeof window<"u"&&(window.onYouTubeIframeAPIReady=()=>{N.resolve(window.YT)});function J(){return{key:"youtube",src:"https://www.youtube.com/iframe_api",async:!0,defer:!0}}const K=()=>N.promise;class Q{api;players=[];play(e){return this.pausePlayers(),e.playVideo()}pausePlayers(e){Array.from(this.players.values()).filter(t=>!e||e&&t!==e).filter(t=>t.getPlayerState).forEach(t=>{t.getPlayerState()===this.api?.PlayerState.PLAYING&&t.pauseVideo()})}async createPlayer(e,t){this.api=await K();const s=new this.api.Player(e,t);return s.addEventListener("onStateChange",({data:p})=>{this.api?.PlayerState.PLAYING===p&&this.pausePlayers(s)}),this.add(s),s}add(e){this.players.push(e)}remove(e){this.players=this.players.filter(t=>t!==e),e.destroy()}}const D={autoplay:{type:Boolean,default:!1},mute:{type:Boolean,default:void 0},url:{type:String,required:!0},title:{type:String,required:!0},host:{type:String,default:"https://www.youtube-nocookie.com"},options:{type:Object,default(){return{}}},posterSources:{type:Array,default(){return[{src:void 0,media:"all",sizes:{default:"100vw"}}]}}},W=["title","src"],X=C({__name:"Base",props:D,emits:["ready","playing"],setup(f,{emit:e}){x();const t=V(),s=new Q,p=l([]),m=l(),d=l(),P=l(),v=l(!1),c=l(!1),y=l(!1),A=l(z()),o=f,S=e;M(()=>{o.autoplay&&$()}),T(()=>{d.value&&s.remove(d.value)}),U({script:g(()=>p.value)});const w=g(()=>o.url&&new URL(o.url).searchParams.get("v")||void 0),E=g(()=>({formats:t.targetFormats,title:o.title,sources:o.posterSources.map(a=>({...a,src:a.src||`/youtube/vi/${w.value}/maxresdefault.jpg`}))}));function $(){c.value=!0;const a={rel:0,enablejsapi:1,autoplay:0,modestbranding:1,showinfo:0,iv_load_policy:3,...o.options,playsinline:1,mute:Number(A.value)||Number(o.mute)};m.value=`${o.host}/embed/${w.value}?`+Object.entries(a).map(([r,L])=>`${r}=${L}`).join("&"),p.value=[J()]}async function Y(){const a=await s.createPlayer(P.value,{videoId:w.value,host:o.host,events:{onReady:r=>{r.target.mute(),s.play(r.target),c.value=!1,v.value=!0,S("ready",{iframe:r.target.getIframe(),player:d})},onStateChange:r=>s.api&&j(s.api,r.data)}});d.value=F(a)}function j(a,r){r===a.PlayerState.PLAYING?y.value=!0:(r===a.PlayerState.ENDED||r===a.PlayerState.PAUSED)&&(y.value=!1),S("playing",y.value)}return(a,r)=>(b(),B("div",{class:O({ready:v.value,playing:y.value})},[i(a.$slots,"beforePlayer",{},void 0,!0),m.value?(b(),B("iframe",{key:0,ref_key:"playerEl",ref:P,title:a.title,class:"player",src:m.value,allow:"accelerometer; fullscreen; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:Y},null,40,W)):h("",!0),_(R,{onClick:$},{default:u(()=>[_(G,k({class:"poster"},E.value,{title:a.title}),null,16,["title"]),c.value?i(a.$slots,"loading-spinner",{key:0},void 0,!0):h("",!0),!v.value&&!c.value?i(a.$slots,"play",{key:1},void 0,!0):h("",!0)]),_:3}),i(a.$slots,"afterPlayer",{},void 0,!0)],2))}}),Z=I(X,[["__scopeId","data-v-4609c2cd"]]),ee=C({__name:"BoosterYoutube",props:D,setup(f){return(e,t)=>(b(),H(Z,k({class:"nuxt-booster-youtube"},e.$props),{beforePlayer:u(()=>[i(e.$slots,"beforePlayer",{},void 0,!0)]),"loading-spinner":u(()=>[i(e.$slots,"loading-spinner",{},()=>[t[0]||(t[0]=n("svg",{class:"loader loading-spinner",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[n("circle",{cx:"32",cy:"32",r:"29",fill:"transparent",stroke:"#ddd","stroke-width":"2"},[n("animateTransform",{attributeName:"transform",type:"rotate",from:"0 32 32",to:"360 32 32",begin:"0s",dur:"1.555s",repeatCount:"indefinite"})])],-1))],!0)]),play:u(()=>[i(e.$slots,"play",{},()=>[t[1]||(t[1]=n("svg",{class:"play",version:"1.1",viewBox:"0 0 68 48"},[n("path",{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z",fill:"#f00"}),n("path",{d:"M 45,24 27,14 27,34",fill:"#fff"})],-1))],!0)]),afterPlayer:u(()=>[i(e.$slots,"afterPlayer",{},void 0,!0)]),_:3},16))}}),le=I(ee,[["__scopeId","data-v-864cc56e"]]);export{le as B};
