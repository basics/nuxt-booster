var q=Object.defineProperty;var K=(i,e,t)=>e in i?q(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var M=(i,e,t)=>K(i,typeof e!="symbol"?e+"":e,t);import{S as C,n as Z,u as W,c as b,B as tt,H as et}from"./BSrAUxm0.js";import{t as st,c as rt}from"./BRWpFFLA.js";import{g as it}from"./B6OufE0o.js";import{H as j,r as y,o as $,c as F,u as P,_ as nt,C as ot,af as at,F as ct,q as lt,p as ut,b as mt,k as z,E as _}from"./clJAH_i8.js";import{u as T}from"./1v1T_LhC.js";import{u as E}from"./DQma1gOb.js";const R=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,dt=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,Q=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,ht=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,p=B(R,Q,dt),x=B(Q,R,ht),V=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,ft=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,U=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,pt=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,g=B(V,U,ft),w=B(U,V,pt),H=/print/i,I=/^print$/i,f=Number.MAX_VALUE;function S(i){let e=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(i);if(e===null&&(p(i)||g(i))&&(e=/(\d)/.exec(i)),e==="0")return 0;if(e===null)return f;let t=e[1];switch(e[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function B(i,e,t){return function(n){return i.test(n)?!0:e.test(n)?!1:t.test(n)}}function L(i,e){const t=H.test(i),n=I.test(i),s=H.test(e),r=I.test(e);return t&&s?!n&&r?1:n&&!r?-1:i.localeCompare(e):t?1:s?-1:null}function gt(i){const t={}.unitlessMqAlwaysFirst;function n(s,r){const u=L(s,r);if(u!==null)return u;const h=p(s)||g(s),c=x(s)||w(s),l=p(r)||g(r),m=x(r)||w(r);if(t&&(!h&&!c||!l&&!m))return!h&&!c&&!l&&!m?s.localeCompare(r):!l&&!m?1:-1;{if(h&&m)return-1;if(c&&l)return 1;const o=S(s),d=S(r);return o===f&&d===f?s.localeCompare(r):o===f?1:d===f?-1:o>d?c?-1:1:o<d?c?1:-1:s.localeCompare(r)}}return n.desktopFirst=function(s,r){const u=L(s,r);if(u!==null)return u;const h=p(s)||g(s),c=x(s)||w(s),l=p(r)||g(r),m=x(r)||w(r);if(t&&(!h&&!c||!l&&!m))return!h&&!c&&!l&&!m?s.localeCompare(r):!l&&!m?1:-1;{if(h&&m)return 1;if(c&&l)return-1;const o=S(s),d=S(r);return o===f&&d===f?s.localeCompare(r):o===f?1:d===f?-1:o>d?c?-1:1:o<d?c?1:-1:-s.localeCompare(r)}},n}const yt=gt();class A{constructor(e,t={}){M(this,"list",[]);M(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(e||this.list).map(n=>new C(n)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(e=>e.key).join("-")}get sorted(){return this.sort?this.list.sort((e,t)=>yt(e.media,t.media)):this.list}get style(){return this.list.map(({media:e,width:t,height:n,style:s})=>`
      @media ${e} { .${this.className}::before { padding-top: calc((1 / (${t} / ${n})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${e} { .${this.className} { aspect-ratio: ${t} / ${n}; } }
      }
      ${s}
    `).reverse().join(" ")}get className(){return`picture-${st(this.sorted.map(({src:e})=>Z(e)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(e=>e.className)}}getFormats(e,t,n){return this.sorted.reduce((s,r)=>s.concat(e.map(u=>r.modify({format:u,preload:u.includes(t)&&n}))),[])}async getMeta(e,t){const n=await Promise.all(this.sorted.map(s=>{const r=e.getSizes(s.src,{sizes:s.sizes,modifiers:s.getModifiers(),...s.getOptions(t)});return s.getMeta(r.src,t)}));return new A(n)}toJSON(){return this.list}static create(...e){return new this(...e)}}var vt={};const _t=["srcset","sizes","media","type"],xt={__name:"Source",props:{source:{type:C,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:i=>["anonymous","use-credentials","",!0,!1].includes(i)}},setup(i){const e=new Map([["jpg","jpeg"]]),t=i,n=W(),s=j().$booster,r=n.getSizes(t.source.src,{sizes:t.source.sizes,modifiers:t.source.getModifiers(),...t.source.getOptions(s)}),u=y(r.srcset||r.src),h=y(`image/${e.get(t.source.format)||t.source.format}`),c=y(it(t.crossorigin||s.crossorigin)),l=new C(t.source);return T({link:[r&&l.preload&&vt.prerender&&l.getPreload(u,r.sizes,c)].filter(Boolean)}),(m,o)=>($(),F("source",{srcset:u.value,sizes:P(r).sizes,media:i.source.media,type:h.value},null,8,_t))}},Y={sources:{type:[Array,A],required:!0},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:b},sortSources:{type:Boolean,default:!0}},wt={__name:"Base",props:Y,emits:["load"],async setup(i,{emit:e}){let t,n;const s=["avif","webp","png","jpg","gif"],r=i,u=e,{isCritical:h}=E(),c=W(),l=j().$booster,m=A.create(r.sources,{sort:r.sortSources}),o=y(null),d=r.formats||l.targetFormats,D=Array.from(new Set(s.map(a=>d.find(v=>v.includes(a))))).filter(Boolean),G=s.find(a=>d.find(v=>v.includes(a))),J=y(m.getFormats(D,G,h)),N=ot(()=>{var a;return((a=o.value)==null?void 0:a.classNames)||{}}),X=a=>{u("load",a)};T(()=>{if(o.value&&o.value.length){const a=o.value.classNames;return{style:[rt(o.value,a)]}}return{}});try{o.value=([t,n]=at(()=>m.getMeta(c,l)),t=await t,n(),t)}catch(a){console.error(a)}return(a,v)=>($(),F("picture",{class:z([N.value.picture,"nuxt-booster-picture"])},[($(!0),F(ct,null,lt(J.value,k=>($(),ut(P(xt),{key:k.key,source:k,crossorigin:a.crossorigin},null,8,["source","crossorigin"]))),128)),mt(P(tt),{class:z(N.value.image),title:a.title,alt:a.alt,crossorigin:a.crossorigin,width:"0",height:"0",onLoad:X},null,8,["class","title","alt","crossorigin"])],2))}},O=nt(wt,[["__scopeId","data-v-fc7d4048"]]),Pt={props:{hydrate:{type:Boolean,default:!0},...Y},setup(){const{isCritical:i}=E();return{isCritical:i}},render(){return this.hydrate?_(O,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.isCritical}):_(et,{},[_("noscript",{class:"nuxt-booster-picture-noscript"},[_(O,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.hydrate})])])}};export{Pt as _};
