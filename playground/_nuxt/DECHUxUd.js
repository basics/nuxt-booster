import{e as B,Z as k,Q as $,$ as L,a0 as D,a1 as A,a2 as T,R as x,a3 as z,a4 as G,G as P,i as V,a5 as Z,j as w,B as y,a6 as M,u as Y,a7 as Q,c as X,o as K,m as ee,h as te,_ as ie}from"./BJAzftlL.js";import{t as W,g as se}from"./CkJfcuOb.js";import{g as re}from"#entry";import{a as oe}from"./cGGx-_Fk.js";const Ce=B({name:"HydrationWrapper",setup(t,{slots:e}){const i=e.default?e.default():[];return()=>ne(i)}}),ne=t=>t.length===1?t[0]:t;function ae(t){return new URL(globalThis.location.href)}const I=["avif","webp","png","jpg","gif"],ce="jpg",de=t=>{const{pathname:e}=L(t),s=(D(e,{strict:!1})||"").match(/\.([^.]+)$/),r=s?s[1]:"";return r&&I.includes(r)||I.includes(r)?r:ce};async function ue(t,e,i){window.Image?t=t.modify({src:e}):t=t.modify({src:$(e)?e:k(e,ae().origin)});const{width:s,height:r}=await i.getImageSize(t.src);return t.modify({width:s,height:r})}class _{src;media;sizes;width;height;format;quality;preload;modifiers;provider;preset;densities;constructor({src:e,sizes:i,width:s,height:r,media:o="all",quality:n=70,format:a=void 0,preload:c=!1,modifiers:d={},provider:f=void 0,preset:p=void 0,densities:h=void 0}){this.src=e,this.sizes=i,this.media=o,this.width=s,this.height=r,this.format=he(e,a),this.quality=n,this.preload=c||!1,this.modifiers=d,this.provider=f,this.preset=p,this.densities=h}get key(){return W(JSON.stringify(this.toJSON()))}get ratio(){return(this.width??0)/(this.height??0)}get className(){return`image-${W(le(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,i){return ue(new _({...this.toJSON()}),e,i)}getPreload(e,i,s){return{rel:"preload",as:"image",imagesrcset:e,imagesizes:i,media:this.media,crossorigin:s,fetchpriority:"high"}}modify(e){return new _({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function he(t,e){const i=de(t);return e?.includes(i)?i:e||i}function le(t){if(t.startsWith("/"))return t;const e=new URL(t);return e.pathname+e.search+e.hash}function fe(t){return["anonymous","use-credentials",void 0].includes(t)}const me={source:{type:[_,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){},validator:fe}};async function ge(t,e){return await pe(e).catch(s=>(console.error("Failed to get image meta for "+e,s+""),{width:0,height:0,ratio:0}))}async function pe(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,i)=>{const s=new Image;s.onload=()=>{const r={width:s.width,height:s.height,ratio:s.width/s.height};e(r)},s.onerror=r=>i(r),s.src=t})}function N(t){return e=>e?t[e]||e:t.missingValue}function ve({formatter:t,keyMap:e,joinWith:i="/",valueMap:s}={}){t||(t=(o,n)=>`${o}=${n}`),e&&typeof e!="function"&&(e=N(e));const r=s||{};return Object.keys(r).forEach(o=>{typeof r[o]!="function"&&(r[o]=N(r[o]))}),(o={})=>Object.entries(o).filter(([a,c])=>typeof c<"u").map(([a,c])=>{const d=r[a];return typeof d=="function"&&(c=d(o[a])),a=typeof e=="function"?e(a):a,t(a,c)}).join(i)}function S(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function we(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const i of t.split(" ")){const s=Number.parseInt(i.replace("x",""));s&&e.add(s)}return Array.from(e)}function ye(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function _e(t){const e={};if(typeof t=="string")for(const i of t.split(/[\s,]+/).filter(s=>s)){const s=i.split(":");s.length!==2?e["1px"]=s[0].trim():e[s[0].trim()]=s[1].trim()}else Object.assign(e,t);return e}function Se(t){const e={options:t},i=(r,o={})=>H(e,r,o),s=(r,o={},n={})=>i(r,{...n,modifiers:A(o,n.modifiers||{})}).url;for(const r in t.presets)s[r]=(o,n,a)=>s(o,n,{...t.presets[r],...a});return s.options=t,s.getImage=i,s.getMeta=(r,o)=>$e(e,r,o),s.getSizes=(r,o)=>ze(e,r,o),e.$img=s,s}async function $e(t,e,i){const s=H(t,e,{...i});return typeof s.getMeta=="function"?await s.getMeta():await ge(t,s.url)}function H(t,e,i){if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{provider:s,defaults:r}=xe(t,i.provider||t.options.provider),o=be(t,i.preset);if(e=$(e)?e:T(e),!s.supportsAlias){for(const d in t.options.alias)if(e.startsWith(d)){const f=t.options.alias[d];f&&(e=x(f,e.slice(d.length)))}}if(s.validateDomains&&$(e)){const d=L(e).host;if(!t.options.domains.find(f=>f===d))return{url:e}}const n=A(i,o,r);n.modifiers={...n.modifiers};const a=n.modifiers.format;n.modifiers?.width&&(n.modifiers.width=S(n.modifiers.width)),n.modifiers?.height&&(n.modifiers.height=S(n.modifiers.height));const c=s.getImage(e,n,t);return c.format=c.format||a||"",c}function xe(t,e){const i=t.options.providers[e];if(!i)throw new Error("Unknown provider: "+e);return i}function be(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function ze(t,e,i){const s=S(i.modifiers?.width),r=S(i.modifiers?.height),o=_e(i.sizes),n=i.densities?.trim()?we(i.densities.trim()):t.options.densities;ye(n);const a=s&&r?r/s:0,c=[],d=[];if(Object.keys(o).length>=1){for(const u in o){const l=O(u,String(o[u]),r,a,t);if(l!==void 0){c.push({size:l.size,screenMaxWidth:l.screenMaxWidth,media:`(max-width: ${l.screenMaxWidth}px)`});for(const v of n)d.push({width:l._cWidth*v,src:j(t,e,i,l,v)})}}Me(c)}else for(const u of n){const l=Object.keys(o)[0];let v=l?O(l,String(o[l]),r,a,t):void 0;v===void 0&&(v={size:"",screenMaxWidth:0,_cWidth:i.modifiers?.width,_cHeight:i.modifiers?.height}),d.push({width:u,src:j(t,e,i,v,u)})}We(d);const f=d[d.length-1],p=c.length?c.map(u=>`${u.media?u.media+" ":""}${u.size}`).join(", "):void 0,h=p?"w":"x",m=d.map(u=>`${u.src} ${u.width}${h}`).join(", ");return{sizes:p,srcset:m,src:f?.src}}function O(t,e,i,s,r){const o=r.options.screens&&r.options.screens[t]||Number.parseInt(t),n=e.endsWith("vw");if(!n&&/^\d+$/.test(e)&&(e=e+"px"),!n&&!e.endsWith("px"))return;let a=Number.parseInt(e);if(!o||!a)return;n&&(a=Math.round(a/100*o));const c=s?Math.round(a*s):i;return{size:e,screenMaxWidth:o,_cWidth:a,_cHeight:c}}function j(t,e,i,s,r){return t.$img(e,{...i.modifiers,width:s._cWidth?s._cWidth*r:void 0,height:s._cHeight?s._cHeight*r:void 0},i)}function Me(t){t.sort((i,s)=>i.screenMaxWidth-s.screenMaxWidth);let e=null;for(let i=t.length-1;i>=0;i--){const s=t[i];s.media===e&&t.splice(i,1),e=s.media}for(let i=0;i<t.length;i++)t[i].media=t[i+1]?.media||""}function We(t){t.sort((i,s)=>i.width-s.width);let e=null;for(let i=t.length-1;i>=0;i--){const s=t[i];s.width===e&&t.splice(i,1),e=s.width}}const Ie=ve({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>z(t)+"_"+z(e)}),Ne=!0,Oe=!0,je=(t,{modifiers:e={},baseURL:i}={},s)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const r=Ie(e)||"_";return i||(i=x(s.options.nuxt.baseURL,"/_ipx")),{url:x(i,r,G(t).replace(/\/{2,}/g,"/"))}},Re=Object.freeze(Object.defineProperty({__proto__:null,getImage:je,supportsAlias:Oe,validateDomains:Ne},Symbol.toStringTag,{value:"Module"})),Be={screens:{xs:576,sm:768,md:996,lg:1200,xl:1367,xxl:1600,"2xl":1536,default:320,xxs:480,"4k":1921},presets:{},provider:"ipxStatic",domains:["picsum.photos","img.youtube.com","i.vimeocdn.com","i.pickadummy.com"],alias:{"/picsum":"https://picsum.photos","/youtube":"https://img.youtube.com","/vimeo":"https://i.vimeocdn.com","/pickadummy":"https://i.pickadummy.com"},densities:[1,2],format:["webp"],providers:{ipxStatic:{provider:Re,defaults:{}}}},Le=t=>{const e=V(),i=P();return i.$img||i._img||(i._img=Se({...Be,event:i.ssrContext?.event,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};var R={};const Ae=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],Pe=B({inheritAttrs:!1,__name:"Base",props:me,emits:["load"],async setup(t,{emit:e}){let i,s;const r=Z(),o=t,n=e,a=Le(),c=P().$booster,{isCritical:d}=oe(),f=w(!0),p=w(),h=w(),m=w(),u=w(),l=w(),v=y(()=>re(o.crossorigin||c.crossorigin)),q=y(()=>{const g={loading:f.value};return m.value?.className&&(g[m.value.className]=!0),g}),E=y(()=>r.width||p.value?.width),U=y(()=>r.height||p.value?.height),C=y(()=>d.value?"eager":"lazy"),F=y(()=>!o.source||new _(o.source).format!=="svg"?"async":"sync");function J(g){f.value=!1,n("load",g.target)}if(o.source){m.value=M(new _(o.source)),h.value=a.getSizes(m.value.src,{sizes:m.value.sizes,modifiers:m.value.getModifiers(),...m.value.getOptions(c)}),u.value=h.value.srcset||h.value.src,l.value=h.value.sizes;const g=w({});if(Y(()=>g.value),h.value&&h.value.src){try{p.value=M(([i,s]=Q(()=>m.value.getMeta(h.value.src,c)),i=await i,s(),i))}catch(b){console.error(b)}g.value={style:[p.value&&se(m.value)].filter(Boolean),link:[!(!h.value||!d.value)&&R.prerender&&m.value.getPreload(h.value.srcset,h.value.sizes,v.value)].filter(Boolean),noscript:[R.prerender&&{key:"img-nojs",children:"<style>img { content-visibility: unset !important; }</style>"}].filter(Boolean)}}}else f.value=!1;return(g,b)=>(K(),X("img",ee(te(r),{srcset:u.value,sizes:l.value,width:E.value,height:U.value,class:["nuxt-booster-image",q.value],title:g.title,alt:g.alt||g.title,loading:C.value,decoding:F.value,crossorigin:v.value,onLoad:J}),null,16,Ae))}}),Fe=ie(Pe,[["__scopeId","data-v-c960924f"]]);export{Fe as B,Ce as H,_ as S,fe as c,me as i,le as n,Le as u};
